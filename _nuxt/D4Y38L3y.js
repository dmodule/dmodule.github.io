import{bL as P,a_ as G,bs as a,bq as o,br as t,bB as L,bC as T,bW as h,bx as s,bD as l,r as v,bX as U,by as F,bA as W,cm as O,cu as E,bI as I,bP as R,bF as Z}from"./CJ_CGJpm.js";import{w as Q,a as X}from"./C7OMVk2J.js";import{u as S}from"./-Pa_sf8E.js";import{b as J,f as u,c as tt}from"./Ul5rOUWU.js";import{c as et,d as st,l as q,e as at,f as ot,g as nt}from"./ChsSowZC.js";import"./DOh2-wJO.js";import"./DxqHYnwt.js";import"./DdDBkiWh.js";import"./CvURW2WX.js";import"./BLVB0qGI.js";const lt={class:"text-sm border-b border-base-200"},rt={class:"flex gap-2 px-2 -mb-[1px]"},it=["disabled","onClick"],dt={__name:"Tabs",props:{modelValue:{default:null},items:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m,{emit:d}){const x=d,k=m,f=G({get:()=>k.modelValue,set:p=>{x("update:modelValue",p)}});return(p,g)=>(a(),o("div",lt,[t("div",rt,[(a(!0),o(L,null,T(m.items,(i,w)=>(a(),o("button",{key:w,type:"button",class:h(["px-2 py-1 border-b border-transparent",{"border-base-primary text-base-primary":s(f)===i.id}]),disabled:m.disabled,onClick:()=>{f.value=i.id}},l(i.name),11,it))),128))])]))}},ct=P(dt,[["__scopeId","data-v-9f83f820"]]),ut={class:"relative flex flex-col max-h-full overflow-hidden"},mt={class:"py-3 flex-1 h-full overflow-auto"},pt={class:"overflow-x-auto w-full px-1.5 max-h-screen text-sm"},bt={key:0,class:"min-h-10"},yt={key:0,class:"table text-sm text-center table-pin-rows table-pin-cols"},_t={key:0,class:"text-base-primary"},ht={key:1,class:"text-base-secondary"},xt={key:1,class:"table text-sm text-center table-pin-rows table-pin-cols"},ft={key:0,class:"text-base-primary"},kt={key:1,class:"text-base-secondary"},gt={key:0,class:"absolute z-10 inset-0 backdrop-blur-[3px] bg-black/10 flex items-center justify-center"},Nt={__name:"BoxCommand",props:["tvChartWrap","commandToggle"],async setup(m){let d,x;const k=J(),{emit:f}=tt(),p=G(()=>k.tradingHandle),g=v(1),i=v(1),w=[{id:1,name:"Sổ lệnh thường"},{id:2,name:"Sổ lệnh điều kiện"}],c=r=>{const n=at.find(C=>C.id.toLowerCase()===(r==null?void 0:r.toLowerCase()));return n||{}},V=async r=>{let n=null;i.value===2?n=await ot(r):n=await nt(r),n.status&&(f("eRefreshLimitOrder"),g.value++)},{data:H,status:j}=([d,x]=Q(()=>U("command",()=>i.value===2?et():st(),{watch:[p,i,g]})),d=await d,x(),d);return(r,n)=>{var z;const C=ct,M=Z,K=X;return a(),o("div",ut,[F(C,{class:"pt-1 sticky top-0",modelValue:s(i),"onUpdate:modelValue":n[0]||(n[0]=e=>W(i)?i.value=e:null),items:w},null,8,["modelValue"]),O(t("div",mt,[t("div",pt,[s(j)==="success"?(a(),o("div",bt,[s(i)===2?(a(),o("table",yt,[n[2]||(n[2]=t("thead",null,[t("tr",{class:"text-xs"},[t("th",{class:"py-1"},"Lệnh"),t("th",{class:"py-1 w-20"},"Mã/Tiền mặt"),t("th",{class:"py-1"},"Điều kiện"),t("th",{class:"py-1"},"Giá đặt"),t("th",{class:"py-1"},"Khối lượng"),t("th",{class:"py-1"},"Thời gian đặt"),t("th",{class:"py-1"},"Hết hạn"),t("th",{class:"py-1"},"Trạng thái"),t("th",{class:"py-1"})])],-1)),t("tbody",null,[(a(!0),o(L,null,T((z=s(H))==null?void 0:z.content,(e,D)=>{var b,y,_,B,N,Y,$,A;return O((a(),o("tr",{key:D},[t("td",null,[((b=e.targetOrder)==null?void 0:b.side)==="NB"?(a(),o("div",_t,"Mua")):(a(),o("div",ht,"Bán"))]),t("td",null,[t("div",{class:h(["px-1 py-0.5 text-white rounded-sm",[((y=e.targetOrder)==null?void 0:y.side)==="NB"?"bg-base-primary":"bg-base-secondary"]])},l(e.symbol),3)]),t("td",null,l(e.condition),1),t("td",null,l(s(u)((_=e.targetOrder)==null?void 0:_.price)),1),t("td",null,l(s(u)((B=e.targetOrder)==null?void 0:B.quantity)),1),t("td",null,l(("useDate"in r?r.useDate:s(S))(e.createdAt,"YYYY-MM-DD HH:mm")),1),t("td",null,l(("useDate"in r?r.useDate:s(S))((N=e.timeInForce)==null?void 0:N.expireTime,"YYYY-MM-DD HH:mm")),1),t("td",{class:h(["capitalize",[((Y=c(e.status))==null?void 0:Y.color)===1?"text-base-primary":(($=c(e.status))==null?void 0:$.color)===2?"text-yellow-500":"text-base-secondary"]])},l((A=c(e.status))==null?void 0:A.name),3),t("td",null,[F(M,{onClick:wt=>V(e.id),icon:"i-ri-close-line",color:"red",variant:"ghost","aria-label":"close",size:"xs",ui:{rounded:"rounded-full"}},null,8,["onClick"])])])),[[E,e.status!=="CANCELLED"]])}),128))])])):(a(),o("table",xt,[n[3]||(n[3]=t("thead",null,[t("tr",{class:"text-xs"},[t("th",{class:"py-1"},"Lệnh"),t("th",{class:"py-1 w-20"},"Mã/Tiền mặt"),t("th",{class:"py-1"},"Thời gian"),t("th",{class:"py-1"},"Giá đặt"),t("th",{class:"py-1"},"Giá khớp"),t("th",{class:"py-1"},"Khối lượng"),t("th",{class:"py-1"},"Trạng thái"),t("th",{class:"py-1"})])],-1)),t("tbody",null,[(a(!0),o(L,null,T(s(H),(e,D)=>{var b,y,_;return a(),o("tr",{key:D},[t("td",null,[e.side==="NB"?(a(),o("div",ft,"Mua")):(a(),o("div",kt,"Bán"))]),t("td",null,[t("div",{class:h(["px-1 py-0.5 text-white rounded-sm",[e.side==="NB"?"bg-base-primary":"bg-base-secondary"]])},l(e.symbol),3)]),t("td",null,l(("useDate"in r?r.useDate:s(S))(e.modifiedDate,"HH:mm")),1),t("td",null,l(s(u)(e.price)),1),t("td",null,l(s(u)(e.averagePrice)),1),t("td",null,l(s(u)(e.fillQuantity))+" / "+l(s(u)(e.quantity)),1),t("td",{class:h(["capitalize",[((b=c(e.orderStatus))==null?void 0:b.color)===1?"text-base-primary":((y=c(e.orderStatus))==null?void 0:y.color)===2?"text-yellow-500":"text-base-secondary"]])},l((_=c(e.orderStatus))==null?void 0:_.name),3),t("td",null,[e.orderStatus!=="Rejected"?(a(),I(M,{key:0,onClick:B=>V(e.id),icon:"i-ri-close-line",color:"red",variant:"ghost","aria-label":"close",size:"xs",ui:{rounded:"rounded-full"}},null,8,["onClick"])):R("",!0)])])}),128))])]))])):(a(),I(K,{key:1,height:"40px"}))])],512),[[E,m.commandToggle]]),s(p).status?R("",!0):(a(),o("div",gt,[t("button",{class:"rounded-full py-1 px-4 bg-yellow-500 text-black",onClick:n[1]||(n[1]=(...e)=>s(q)&&s(q)(...e))}," Mở kết nối ")]))])}}};export{Nt as default};
