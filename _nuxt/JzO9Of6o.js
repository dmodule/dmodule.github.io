import{r as A,a_ as m,bT as M,bb as L,bs as i,bq as d,br as e,bM as P,bC as u,bw as a,bx as R,by as v,bH as z,bR as F,bA as H,bB as N,bS as f,bW as K,cy as U}from"./B8Uc90hl.js";import{u as j}from"./HQA1JVik.js";import{u as E,w as Q}from"./DC3_xp_J.js";import W from"./DDbLNGux.js";import{h as w,f as _}from"./CsBS7RdU.js";import{u as Y}from"./DsGJZiav.js";import{a as Z}from"./DKJZxzzI.js";import{s as q}from"./J4vOeAnM.js";import"./C83wUoeB.js";import"./DdDBkiWh.js";import"./DyzE3n9j.js";import"./BUHp3l8K.js";import"./B7LLxn3i.js";import"./DxqHYnwt.js";import"./BLVB0qGI.js";const G={class:"rounded-finsc overflow-hidden h-full w-full text-base bg-base-300 flex flex-col"},$={key:0,class:"flex-none h-[32px]"},J={class:"w-full relative flex justify-center"},O={class:"w-[180px] mx-auto relative"},X={class:"text-base-bg-300 absolute inset-0 origin-top-left",width:"360",height:"48",viewBox:"0 0 360 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(0.5)"}},ee={class:"flex justify-between text-xs -mt-6 px-4 pb-2"},te={class:"p-2 -mt-2"},se={class:"overflow-x-auto w-full pb-32 max-h-screen rounded-lg bg-white/5"},oe={class:"table text-sm text-center table-pin-rows table-pin-cols"},ae={colspan:"3"},le={class:"flex relative"},re={class:"flex-1"},ne={class:"w-80 h-[600px]"},ke={__name:"BoxVolumn",props:{symbol:{type:String,default:""}},async setup(g){let c,h;const b=g,p=A(1),x=m(()=>b.symbol||E().symbol),S=m(()=>{var s;return(((s=n.value)==null?void 0:s.historyIntra)||[]).toReversed()}),k=m(()=>{var s;return(s=n.value)==null?void 0:s.historyIntra.reduce((o,r)=>o+r.Price*r.Volume,0)}),B=m(()=>{var s,o,r;return(r=(o=n.value)==null?void 0:o.historyIntra[((s=n.value)==null?void 0:s.historyIntra.length)-1])==null?void 0:r.TotalVolume}),D={colors:["#34c85e","#d73834","#ff7602"],type:"bar",height:"100%",horizontal:!0,stacked:!0,stroke:"smooth",strokeWidth:1,strokeDashes:0,markers:0,dark:!0,fillSolid:!0,animation:!1},C=Y({baseURL:Z().API_URI}),{data:n,status:ie}=([c,h]=Q(()=>M("intraday",()=>C.get(`IntradayQuotes?symbol=${x.value}`),{watch:[x,p]})),c=await c,h(),c),y=(s,o,r,t)=>{const l=new Date,I=new Date(l.getFullYear(),l.getMonth(),l.getDate(),s,o),T=new Date(l.getFullYear(),l.getMonth(),l.getDate(),r,t);return l>=I&&l<=T},V=()=>y(9,0,11,30)||y(13,0,15,0);return L(()=>{q(()=>{V()&&p.value++},5*1e3)}),(s,o)=>{const r=U;return i(),d("div",G,[b.symbol?P("",!0):(i(),d("div",$,[e("div",J,[e("div",O,[(i(),d("svg",X,o[0]||(o[0]=[e("path",{d:"M357.237 2.82376e-05C398.658 2.82376e-05 -39.9387 -3.52971e-05 2.95743 2.82376e-05C45.8536 9.17724e-05 66.301 48 115.04 48H251.002C304.338 48 315.815 2.82376e-05 357.237 2.82376e-05Z",fill:"currentColor"},null,-1)]))),o[1]||(o[1]=e("div",{class:"bg-base-primary text-white rounded-full relative text-sm text-center px-2 w-24 mx-auto"}," Khớp lệnh ",-1))])])])),e("div",ee,[e("div",null,[e("div",null,u(a(w)(a(B)))+" cổ",1)]),e("div",null,[e("div",null,u(a(w)(a(k),!0)),1)])]),e("div",te,[R(r,{mode:"hover",popper:{placement:"left-start"}},{panel:v(()=>[e("div",ne,[(i(),z(a(W),F({key:a(p),categories:a(n).accumulatedVolumes.categories,series:a(n).accumulatedVolumes.series},D),null,16,["categories","series"]))])]),default:v(()=>[e("div",se,[e("table",oe,[o[2]||(o[2]=e("thead",null,[e("tr",{class:"text-xs"},[e("th",{class:"py-1 w-20"},"Thời gian"),e("th",{class:"py-1 w-20"},"Giá"),e("th",{class:"py-1"},"KL"),e("th",{class:"py-1 w-10"},"Lệnh")])],-1)),e("tbody",null,[(i(!0),d(H,null,N(a(S),(t,l)=>(i(),d("tr",{key:l},[e("td",null,u(("useDate"in s?s.useDate:a(j))(t.Date,"HH:mm:ss")),1),e("td",ae,[e("div",le,[e("div",{class:f(["absolute bottom-0 left-0 h-full w-full rounded",{"bg-gradient-to-r from-green-400/20":t.Side==="B","bg-gradient-to-r from-red-400/20":t.Side==="S"}]),style:K({"max-width":t.percentQuantity+"%"})},null,6),e("div",{class:f(["flex-none w-20",{"text-yellow-600":t.Side===null,"text-green-600":t.Side==="B","text-red-600":t.Side==="S"}])},u(a(_)(t.Price)),3),e("div",re,u(a(_)(t.Volume)),1),e("div",{class:f(["flex-none w-10 font-semibold",{"text-yellow-600":t.Side===null,"text-green-600":t.Side==="B","text-red-600":t.Side==="S"}])},u(t.Side==="B"?"M":t.Side==="S"?"B":"K"),3)])])]))),128))])])])]),_:1})])])}}};export{ke as default};
