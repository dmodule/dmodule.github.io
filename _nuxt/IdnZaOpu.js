import{_ as K}from"./B7QD651e.js";import{r as _,b4 as g,bw as W,aG as Z,b3 as u,b1 as h,b2 as n,b9 as w,ba as O,bc as T,bd as C,bu as S,b8 as c,be as x,bt as J,bv as M,bg as X}from"./BfFq9ARU.js";import{u as ee,w as te}from"./Bm2oow5i.js";import ne from"./D9LTxdYW.js";import{a as $,u as se}from"./hM9PpQmY.js";import"./CgSpnCAA.js";import"./DxkKgslY.js";import"./6bUBh_yt.js";import"./BLVB0qGI.js";import"./B7LlgBWf.js";const G=[{id:"incomestatement",name:"Kết quả kinh doanh"},{id:"balancesheet",name:"Bảng cân đối kế toán"},{id:"cashflow",name:"Bảng dòng tiền"}],ae={revenue:"Doanh thu thuần",yearRevenueGrowth:"TT DT YoY%",quarterRevenueGrowth:"TT DT QoQ%",costOfGoodSold:"Giá vốn hàng bán",grossProfit:"Lợi nhuận gộp",operationExpense:"Chi phí hoạt động",operationProfit:"Lợi nhuận hoạt động",yearOperationProfitGrowth:"TT LNHĐ	YoY%",quarterOperationProfitGrowth:"TT LNHĐ QoQ%",interestExpense:"Chi phí lãi vay",preTaxProfit:"Lợi nhuận trước thuế",postTaxProfit:"Lợi nhuận sau thuế",shareHolderIncome:"Lợi nhuận dành cho cổ đông",yearShareHolderIncomeGrowth:"TT LNCĐ YoY%",quarterShareHolderIncomeGrowth:"TT LNCĐ QoQ%",investProfit:"Lợi nhuận từ đầu tư",serviceProfit:"Lợi nhuận từ dịch vụ",otherProfit:"Lợi nhuận khác",provisionExpense:"Chi phí dự phòng",operationIncome:"Thu nhập từ hoạt động kinh doanh",ebitda:"EBITDA"},oe={shortAsset:"Tài sản ngắn hạn",cash:"Tiền và các khoản tương đương tiền",shortInvest:"Đầu tư ngắn hạn",shortReceivable:"Phải thu ngắn hạn",inventory:"Hàng tồn kho",longAsset:"Tài sản dài hạn",fixedAsset:"Tài sản cố định",asset:"Tổng tài sản",debt:"Nợ phải trả",shortDebt:"Nợ ngắn hạn",longDebt:"Nợ dài hạn",equity:"Vốn chủ sở hữu",capital:"Vốn điều lệ",centralBankDeposit:"Tiền gửi tại Ngân hàng Trung ương",otherBankDeposit:"Tiền gửi tại Ngân hàng khác",otherBankLoan:"Vay từ Ngân hàng khác",stockInvest:"Đầu tư chứng khoán",customerLoan:"Cho vay khách hàng",badLoan:"Nợ xấu",provision:"Dự phòng rủi ro tín dụng",netCustomerLoan:"Cho vay khách hàng ròng",otherAsset:"Tài sản khác",otherBankCredit:"Tín dụng từ Ngân hàng khác",oweOtherBank:"Nợ Ngân hàng khác",oweCentralBank:"Nợ Ngân hàng Trung ương",valuablePaper:"Giấy tờ có giá",payableInterest:"Lãi phải trả",receivableInterest:"Lãi phải thu",deposit:"Tiền gửi",otherDebt:"Nợ khác",fund:"Quỹ",unDistributedIncome:"Lợi nhuận chưa phân phối",minorShareHolderProfit:"Lợi nhuận của cổ đông thiểu số",payable:"Phải trả"},re={investCost:"Chi phí đầu tư",fromInvest:"Dòng tiền từ hoạt động đầu tư",fromFinancial:"Dòng tiền từ hoạt động tài chính",fromSale:"Dòng tiền từ hoạt động kinh doanh",freeCashFlow:"Dòng tiền tự do"},Q=(e,i={})=>{const l={baseURL:$().API_URL,headers:{Authorization:null},method:e.toUpperCase(),timeout:1e4,...i},d=se().token;return d&&(l.headers.Authorization=d),l};function ie(e){return e!=null&&e.data&&typeof e.data=="string"&&e.data.length>0&&console.log(e.data),Promise.reject(e)}async function k(e,i,l,d={}){try{return await $fetch(i,e==="GET"||e==="DELETE"?{...Q(e,d),params:l}:{...Q(e,d),body:l})}catch(L){return ie(L)}}function le(e={}){return{get:(i,l={})=>k("GET",i,l,e),post:(i,l={})=>k("POST",i,l,e),put:(i,l={})=>k("PUT",i,l,e),patch:(i,l={})=>k("PATCH",i,l,e),delete:(i,l={})=>k("DELETE",i,l,e)}}const ce={class:"rounded-finsc overflow-hidden flex flex-col h-full w-full text-base bg-base-300"},ue={class:"flex flex-none justify-between"},he={class:"text-sm h-full flex items-center pr-6 -ml-6 -mt-3 overflow-hidden"},de={class:"flex gap-2 justify-around whitespace-nowrap overflow-auto"},fe=["onClick"],pe={key:0,class:"px-6 pb-6 flex-1 flex flex-col overflow-auto -mt-6"},ge={class:"flex-none -mx-4"},ve={class:"flex-none"},me={class:"flex justify-between items-center"},be={class:"flex flex-wrap gap-1 min-w-32"},ye={class:"relative"},_e={class:"absolute inset-y-0 -left-4 flex items-center"},xe={class:"flex gap-2 text-center"},ke={class:"absolute inset-y-0 -right-4 flex items-center"},we={class:"my-4 font-semibold"},Te={class:"flex-1"},Ce={class:"flex flex-wrap gap-1 min-w-32"},Le={class:"relative"},Pe={class:"flex gap-2 text-center"},Qe={__name:"BoxSlot",async setup(e){let i,l;const d={incomestatement:ae,balancesheet:oe,cashflow:re},L={incomestatement:["revenue","grossProfit","postTaxProfit"],balancesheet:["asset","capital","equity"],cashflow:["fromSale","fromInvest","freeCashFlow"]},f=_("incomestatement"),H=s=>{f.value=s},v=_(!0),D=s=>{v.value=s},V=ee(),q=g(()=>V.symbol),A=g(()=>{var t;const s=((t=N.value)==null?void 0:t.data)||[];return Object.keys(s[0]).filter(a=>a!=="ticker"&&a!=="quarter"&&a!=="year")}),E=g(()=>{var a;const s={};return(((a=N.value)==null?void 0:a.data)||[]).forEach(o=>{const r=o.quarter&&o.quarter<=4?`${o.year} Q${o.quarter}`:o.year;s[r]||(s[r]={}),A.value.forEach(p=>{s[r][p]=o[p]||null})}),s}),I=g(()=>{const s=new Set(y.value),t={};for(const a of s)E.value[a]&&(t[a]=E.value[a]);return t}),P=g(()=>{var a;const t=(((a=N.value)==null?void 0:a.data)||[]).map(o=>o.quarter&&o.quarter<=4?`${o.year} Q${o.quarter}`:o.year);return[...new Set(t)].sort((o,r)=>r-o)}),m=_(0),b=_(4),y=g(()=>P.value.slice(m.value,b.value).sort((s,t)=>{const[a,o]=String(s).split(" Q").map(Number),[r,p]=String(t).split(" Q").map(Number);return a-r||(o||0)-(p||0)})),j=()=>{m.value>0&&(m.value-=4,b.value-=4)},z=()=>{b.value<P.value.length&&(m.value+=4,b.value+=4)},F={type:"bar",height:"200px",stroke:"smooth",strokeWidth:1,strokeDashes:0,markers:0,dark:!0,fillSolid:!0},Y=_([]),R=le({baseURL:$().API_FINSC}),{data:N,status:U}=([i,l]=te(()=>W("finance",()=>R.get(`/scfa/${q.value}/${f.value}?yearly=${v.value}`),{watch:[q,f,v]})),i=await i,l(),i);return Z(()=>y.value,s=>{console.log(s),Y.value=L[f.value].map(t=>({name:d[f.value][t],data:s.map(a=>I.value[a][t])}))}),(s,t)=>{const a=K,o=X;return u(),h("div",ce,[n("div",ue,[w(a,{scale:.5,pos:"tl"},{default:O(()=>t[2]||(t[2]=[n("div",{class:"mr-10 mb-8 text-2xl rotate-[-32deg] font-semibold text-base-primary",title:"Báo cáo tài chính"},[n("div",{class:"animate-bounce"},"BCTC")],-1)])),_:1}),n("div",he,[n("div",de,[(u(!0),h(T,null,C(c(G),(r,p)=>(u(),h("button",{key:p,onClick:B=>H(r.id),class:S(["rounded-full px-3 py-1 border border-transparent",c(f)===r.id?"bg-base-100":"border-base-neutral"])},x(r.name),11,fe))),128))])])]),c(U)==="success"?(u(),h("div",pe,[n("div",ge,[w(c(ne),J({categories:c(y),series:c(Y)},F),null,16,["categories","series"])]),n("div",ve,[n("div",me,[n("div",be,[n("button",{class:S(["px-3 py-1 rounded-full",{"bg-base-primary":c(v)}]),onClick:t[0]||(t[0]=r=>D(!0))}," Hàng Năm ",2),n("button",{class:S(["px-3 py-1 rounded-full",{"bg-base-primary":!c(v)}]),onClick:t[1]||(t[1]=r=>D(!1))}," Hàng Quý ",2)]),n("div",ye,[n("div",_e,[w(o,{onClick:j,disabled:c(m)===0,icon:"i-ri-arrow-left-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])]),n("div",xe,[(u(!0),h(T,null,C(c(y),r=>(u(),h("div",{key:r,class:"font-semibold w-14"},x(r),1))),128))]),n("div",ke,[w(o,{onClick:z,disabled:c(b)>=c(P).length,icon:"i-ri-arrow-right-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])])])]),n("div",we,x(c(G)[c(f)]),1)]),n("div",Te,[(u(!0),h(T,null,C(c(A),(r,p)=>(u(),h("div",{class:"flex justify-between items-center",key:p},[n("div",Ce,x(d[c(f)][r]),1),n("div",Le,[n("div",Pe,[(u(!0),h(T,null,C(c(y),B=>(u(),h("div",{class:"w-14 my-1",key:B},x(c(I)[B][r]||"-"),1))),128))])])]))),128))])])):M("",!0)])}}};export{Qe as default};
