import{r as l,bb as E,b3 as A,b7 as M,b8 as v}from"./B5CNXMPg.js";import{a as c}from"./CbGsoO7p.js";const H=()=>{var e=new Date().getTime(),t="yxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var s=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(a=="x"?s:s&3|8).toString(16)});return t},J=(e,t)=>{let a;return function(){clearTimeout(a),a=setTimeout(()=>e.apply(this,arguments),t)}},D=e=>JSON.parse(JSON.stringify(e)),w=e=>e&&typeof e=="object"&&Object.keys(e).length!==0&&!Array.isArray(e),j=e=>e!==null&&Array.isArray(e)&&e.length>0&&!e.every(t=>!w(t)),K=(e,t=!1)=>{if(!e)return"";let s=e.split(/(?=[A-Z])/).map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ");return t?s.toLowerCase():s},U=e=>{const t=e.replace(/([a-z])([A-Z])/g,"$1 $2");return t.charAt(0).toUpperCase()+t.slice(1)},z=e=>e?String(e||"").replace(/(\d)(?=(\d{3})+\b)/g,"$1,"):0,L=(e,t=2,a=!0)=>{if(!e)return a?"":0;if(typeof e=="number"){const n=e.toFixed(t).replace(/\B(?=(\d{3})+(?!\d))/g,",");return a?n:parseFloat(n.replace(/,/g,""))}if(isNaN(e))return e;const s=parseFloat(e.replace(/,/g,""));if(isNaN(s))return a?"":0;const o=s.toFixed(t).replace(/\B(?=(\d{3})+(?!\d))/g,",");return a?o:parseFloat(o.replace(/,/g,""))},R=e=>e?parseFloat(String(e).replace(/,/g,"")):0,Z=(e,t=!1)=>{if(e===void 0||typeof e!="number"||isNaN(e))return"";const a={b:t?" tỷ":"b",m:t?" triệu":"m",k:t?" ngàn":"k"};return e>=1e9?(e/1e9).toFixed(0)+a.b:e>=1e6?(e/1e6).toFixed(0)+a.m:e>=1e3?(e/1e3).toFixed(0)+a.k:e.toString()},G=async e=>{try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Error fetching data:",t),{}}};function u(e,t=null){const a=l(t);return E(()=>{const s=localStorage.getItem(e);s&&(a.value=JSON.parse(s)),A(a,o=>{o==null?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(o))},{deep:!0})}),a}const V=M("finsc",()=>{const e=u("auth",{}),t=(r={})=>{e.value={...e.value,...r}},a=u("tradingHandle",{}),s=(r={})=>{a.value={...a.value,...r}},o=u("symbol","FPT"),n=r=>{o.value=r||"FPT"},p=v(c().COOKIE_NAME+"_symbols",{default:()=>["FPT","HPG","TCB","MSN","VIC","VND"]}),b=r=>{p.value=[...r]},i=v(c().COOKIE_NAME+"_modules",{maxAge:c().COOKIE_EXPIRES,sameSite:!0,default:()=>[]}),h=r=>{i.value.push(r)},N=r=>{i.value=[...r]},f=l({}),S=r=>{f.value={...f.value,...r}},d=l([]),T=r=>{d.value={...d.value,...r}},g=l({canslim_style:{},canslim_value:{},data2:{},data3:{}}),C=async r=>{r&&(o.value=r);const y=await $fetch(`${c().API_URI}/tutru?sb=${o.value}`);if(y){const{canslim_style:F,canslim_value:O,data2:I,data3:_}=y;g.value={canslim_style:F[0],canslim_value:O[0],data2:I[0],data3:_[0]}}},x=u("command",1);return{auth:e,setAuth:t,tradingHandle:a,setTradingHandle:s,symbol:o,setSymbol:n,syms:p,setSyms:b,modules:i,addModules:h,setModules:N,dataSI:f,setDataSI:S,dataTP:d,setDataTP:T,tutru:g,fetchTutru:C,command:x,setCommand:r=>{x.value=r}}});function P(e){return{all:e=e||new Map,on:function(t,a){var s=e.get(t);s?s.push(a):e.set(t,[a])},off:function(t,a){var s=e.get(t);s&&(a?s.splice(s.indexOf(a)>>>0,1):e.set(t,[]))},emit:function(t,a){var s=e.get(t);s&&s.slice().map(function(o){o(a)}),(s=e.get("*"))&&s.slice().map(function(o){o(t,a)})}}}const m=P();function X(){return{on:m.on,off:m.off,emit:m.emit}}export{H as a,V as b,X as c,J as d,L as e,z as f,D as g,U as h,w as i,G as j,j as k,Z as l,P as m,R as p,K as t,u};
