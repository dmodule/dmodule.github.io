import{u as w}from"./DiSl0k_O.js";import{D as k}from"./DTMhFqTj.js";import{f as c,g as B}from"./BMkpGpKj.js";import{b as x}from"./MChP8smc.js";import{u as C}from"./76uVBcax.js";import{a_ as m,u as A,r as d,b3 as p,bb as R,bs as D,bq as M}from"./B2zngJ72.js";import"./BLVB0qGI.js";import"./DdDBkiWh.js";import"./BJg5aFPT.js";import"./CXaQVNdb.js";import"./DH-5LqSd.js";import"./DxqHYnwt.js";const G={__name:"TradingviewStock",setup(T,{expose:f}){const a=x(),{getProfile:_}=w(),{sub:b}=_(),r=b.split("|")[1],s=m(()=>a.symbol),{emit:h}=C(),{$colorMode:v}=A(),n=m(()=>v.value),o=d(null),i=d(null),g=e=>{a.setSymbol(e),tvWidget.value.chart().setSymbol(e)},y=e=>{var l;o.value=new k(c,5e3,{maxResponseLength:1e3,expectedOrder:"latestFirst"});const t=new TradingView.widget({theme:n.value,load_last_chart:!0,autosize:!1,width:"100%",height:"100%",symbol:s.value,interval:"1D",timezone:"Asia/Bangkok",container:e,datafeed:o.value,library_path:"/static/tv/charting_library/",locale:B("lang")||"en",enabled_features:["study_templates"],charts_storage_url:c,client_id:r,user_id:r,auto_save_delay:10,charts_storage_api_version:"1.1",disabled_features:["popup_hints"]});t.onChartReady(()=>{t.activeChart().onSymbolChanged().subscribe(null,S=>{const u=S.ticker;s.value=u,a.setSymbol(u)})}),(l=window.frames[0])==null||l.focus()};return p(s,(e,t)=>{t&&o.value.unsubscribeBars(t)}),p(n,e=>{tvWidget.changeTheme(e)}),R(()=>{h("eSymbol",{symbol:s.value}),y(i.value)}),f({updateSymbol:g}),(e,t)=>(D(),M("div",{ref_key:"finscChartRef",ref:i,class:"trader w-full h-full"},null,512))}};export{G as default};
