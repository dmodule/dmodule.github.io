import{_ as ee}from"./B5J8M9Gg.js";import{bL as te,ck as le,cl as se,bs as V,bq as g,by as r,cm as G,cn as K,br as t,bP as I,bF as ne,a_ as N,bB as j,bC as oe,bW as T,bx as l,bD as k,r as b,b3 as z,bb as ae,bA as y,bQ as ie,c1 as L,bE as de}from"./B2zngJ72.js";import{p as S,b as ue,f as M}from"./MChP8smc.js";import{h as re,t as me,l as Z,a as ce}from"./BMkpGpKj.js";import pe from"./D1V226Kd.js";import"./DiSl0k_O.js";import"./BLVB0qGI.js";import"./DdDBkiWh.js";const be={directives:{maska:le},props:{modelValue:{},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"VND"},ext:{type:Boolean,default:!1},extInput:{type:Boolean,default:!1},extPlaceholder:{default:""},step:{type:Number,default:100},min:{type:Number,default:0}},data(){return{options:{preProcess:s=>s.replace(/[$,]/g,""),postProcess:s=>s?new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:s.includes(".")?1:0,maximumFractionDigits:2}).format(s):""},percent:null}},computed:{currency:{get(){return this.modelValue},set(s){this.$emit("update:modelValue",s)}}},watch:{percent(s){this.$emit("update:percent",s)}},methods:{parseMoney:S,decrease(){let s=this.parseMoney(this.currency);s-=this.step,s<=this.min&&(s=this.min),this.$emit("update:modelValue",s)},increase(){let s=this.parseMoney(this.currency);s+=this.step,this.$emit("update:modelValue",s)}}},ve={class:"w-full flex items-center justify-between bg-base-200 rounded-full p-1 text-sm"},fe=["disabled","placeholder"],xe={class:"flex"},ye={key:0,class:"flex w-20 items-center bg-base-100 rounded-full px-2"},Ve=["disabled","placeholder"],ge={key:0};function _e(s,v,d,o,m,a){const c=ne,_=se("maska");return V(),g("div",ve,[r(c,{onClick:a.decrease,disabled:d.disabled,size:"xs",icon:"i-ri-subtract-line",color:"white",variant:"ghost",square:"",ui:{rounded:"rounded-full"}},null,8,["onClick","disabled"]),G(t("input",{"onUpdate:modelValue":v[0]||(v[0]=i=>a.currency=i),class:"flex-1 w-full bg-transparent text-center outline-none",type:"text",disabled:d.disabled,placeholder:d.placeholder},null,8,fe),[[K,a.currency],[_,m.options]]),t("div",xe,[r(c,{onClick:a.increase,disabled:d.disabled,size:"xs",icon:"i-ri-add-line",color:"white",variant:"ghost",square:"",ui:{rounded:"rounded-full"}},null,8,["onClick","disabled"]),d.ext?(V(),g("div",ye,[G(t("input",{"onUpdate:modelValue":v[1]||(v[1]=i=>m.percent=i),disabled:d.disabled||!d.extInput,class:"flex-1 w-full text-center bg-transparent outline-none",type:"text",placeholder:d.extPlaceholder},null,8,Ve),[[K,m.percent]]),d.extInput?(V(),g("span",ge,"%")):I("",!0)])):I("",!0)])])}const ke=te(be,[["render",_e]]),he={class:"flex flex-wrap gap-2"},we=["onClick"],Se={__name:"Buttons",props:{modelValue:{},items:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(s,{emit:v}){const d=v,o=s,m=N({get:()=>o.modelValue,set:c=>d("update:modelValue",c)}),a=c=>m.value=c;return(c,_)=>(V(),g("div",he,[(V(!0),g(j,null,oe(s.items,(i,h)=>(V(),g("button",{key:h,class:T(["w-[52px] rounded-full py-0.5 px-1 bg-base-200 hover:bg-base-primary",[l(m)===i.id?"bg-base-primary":"bg-base-200"]]),onClick:D=>a(i.id)},k(i.name),11,we))),128))]))}},Ce={class:"relative flex flex-col h-full w-full max-w-sm text-sm"},Ue={class:"flex justify-center"},Pe={class:"p-1 overflow-auto"},Te={class:"p-1 rounded-lg flex-1 overflow-auto space-y-2"},Be={class:"max-w-full relative"},ze={class:"flex gap-2"},Le={class:"flex-1"},Me={class:"flex-none w-2/5"},Ie={class:"flex justify-between"},Ne={class:"flex justify-between"},je={class:"ml-1 bg-orange-400/40 text-orange-400 px-1 py-0.5 rounded-md"},De={class:"text-orange-400"},$e={class:"flex justify-between font-semibold mt-2"},Ae={class:"text-left"},Fe={class:"text-purple-400 font-normal"},Oe={class:"text-center"},qe={class:"text-orange-400 font-normal"},Ee={class:"text-right"},Ge={class:"text-sky-400 font-normal"},Ke={key:0,class:"absolute inset-0 backdrop-blur-xl bg-black/10 flex items-center justify-center"},et={__name:"BoxExchange",props:{symbol:{type:String,default:""},textSize:{type:String,default:"1.1rem"},dataSI:{type:Object,default:()=>({})},dataTP:{type:Object,default:()=>({})}},setup(s){const v=s,d=b(1e8),o=b(null),m=b(null),a=b(null),c=b(null),_=b(null),i=b(1),h=b({id:"limit",label:"Giới hạn"}),D=b([{id:"condition",label:"Điều kiện"},{id:"limit",label:"Giới hạn"}]),C=b("MP"),R=[{id:"MP",name:"MP"},{id:"LO",name:"LO"},{id:"ATO",name:"ATO"},{id:"ATC",name:"ATC"}],U=b(null),Q=[{id:.25,name:"25%"},{id:.5,name:"50%"},{id:.75,name:"75%"},{id:1,name:"100%"}],P=b({}),{auth:W}=ue(),w=N(()=>re(v.dataSI,v.dataTP)),B=N(()=>{var p;let u=0,e=0,f=0;const x=(p=w.value)==null?void 0:p.list;return x.length===7&&(u=x[0].price,e=x[3].price,f=x[6].price),{tran:u,tc:e,san:f}}),X=async()=>{await ce(v.symbol,i.value?"BUY":"SELL",C.value,o.value*1e3,S(a.value))},Y=u=>{c.value=o.value+1*u},H=u=>{_.value=o.value-1*u},J=()=>{const u=S(m.value),e=S(o.value)*1e3,f=S(_.value)*1e3;if(!d.value||!e||!u){a.value=null;return}const p=d.value*u/100/(e-f);a.value=Math.round(p/100)*100},$=u=>{i.value=u};return z([o,m,_],()=>{J()}),z(()=>symbol.value,async u=>{var e,f,x;(e=w.value)!=null&&e.list&&((f=w.value)==null?void 0:f.list.length)===7&&(o.value=(x=w.value)==null?void 0:x.list[3].price)},{immediate:!0}),z(()=>U.value,u=>{var e;a.value=((e=P.value)==null?void 0:e.qmax)||0*u}),ae(async()=>{P.value=await me(v.symbol,o.value*1e3)}),(u,e)=>{var F,O,q,E;const f=ee,x=de,p=ke,A=Se;return V(),g("div",Ce,[t("div",Ue,[r(f,{onClick:e[0]||(e[0]=n=>$(1)),scale:.4,text:"Mua",textSize:s.textSize,class:T(["cursor-pointer",{"text-base-primary":l(i),"text-base-bg-100":!l(i)}])},null,8,["textSize","class"]),r(f,{onClick:e[1]||(e[1]=n=>$(0)),scale:.4,text:"Bán",textSize:s.textSize,class:T(["cursor-pointer",{"text-base-bg-100":l(i),"text-base-secondary":!l(i)}])},null,8,["textSize","class"])]),t("div",Pe,[t("div",Te,[t("div",Be,[r(x,{modelValue:l(h),"onUpdate:modelValue":e[2]||(e[2]=n=>y(h)?h.value=n:null),options:l(D),variant:"none",class:"bg-base-200 rounded-full py-0.5",ui:{base:"mx-auto font-semibold uppercase indent-4"}},null,8,["modelValue","options"])]),((F=l(h))==null?void 0:F.id)==="limit"?(V(),g(j,{key:0},[t("div",null,[e[13]||(e[13]=t("div",{class:"ml-2 mb-0.5"},"Giá vào",-1)),r(p,{modelValue:l(o),"onUpdate:modelValue":e[3]||(e[3]=n=>y(o)?o.value=n:null),placeholder:"",step:.1},null,8,["modelValue"]),r(A,{modelValue:l(C),"onUpdate:modelValue":e[4]||(e[4]=n=>y(C)?C.value=n:null),items:R,class:"mt-2"},null,8,["modelValue"])]),t("div",null,[e[14]||(e[14]=t("div",{class:"ml-2 mb-0.5"},"Khối lượng",-1)),r(p,{modelValue:l(a),"onUpdate:modelValue":e[5]||(e[5]=n=>y(a)?a.value=n:null),placeholder:"cổ phiếu"},null,8,["modelValue"]),r(A,{modelValue:l(U),"onUpdate:modelValue":e[6]||(e[6]=n=>y(U)?U.value=n:null),items:Q,class:"mt-2"},null,8,["modelValue"])])],64)):(V(),g(j,{key:1},[t("div",ze,[t("div",Le,[e[15]||(e[15]=t("div",{class:"ml-2 mb-0.5"},"Giá vào",-1)),r(p,{modelValue:l(o),"onUpdate:modelValue":e[7]||(e[7]=n=>y(o)?o.value=n:null),step:.1},null,8,["modelValue"])]),t("div",Me,[e[16]||(e[16]=t("div",{class:"ml-2 mb-0.5"},"Rủi ro / Nav",-1)),r(p,{modelValue:l(m),"onUpdate:modelValue":e[8]||(e[8]=n=>y(m)?m.value=n:null),placeholder:"%",step:.1},null,8,["modelValue"])])]),t("div",null,[e[17]||(e[17]=t("div",{class:"ml-2 mb-0.5"},"Khối lượng",-1)),r(p,{modelValue:l(a),"onUpdate:modelValue":e[9]||(e[9]=n=>y(a)?a.value=n:null),placeholder:"cổ phiếu",ext:"",extPlaceholder:(O=l(P))==null?void 0:O.qmax},null,8,["modelValue","extPlaceholder"])]),t("div",null,[e[18]||(e[18]=t("div",{class:"ml-2 mb-0.5"},"Chốt lãi",-1)),r(p,{modelValue:l(c),"onUpdate:modelValue":e[10]||(e[10]=n=>y(c)?c.value=n:null),disabled:!l(o),ext:"",extInput:"",step:.1,"onUpdate:percent":Y},null,8,["modelValue","disabled"])]),t("div",null,[e[19]||(e[19]=t("div",{class:"ml-2 mb-0.5"},"Cắt lỗ",-1)),r(p,{modelValue:l(_),"onUpdate:modelValue":e[11]||(e[11]=n=>y(_)?_.value=n:null),disabled:!l(o),ext:"",extInput:"",step:.1,"onUpdate:percent":H},null,8,["modelValue","disabled"])])],64)),t("div",null,[t("button",{onClick:X,class:T(["mt-2 rounded-full w-full p-1.5 font-semibold",{"bg-base-primary":l(i),"bg-base-secondary":!l(i)}]),style:ie({"font-size":s.textSize})}," Xác nhận ",6)]),t("div",null,[t("div",null,[t("div",Ie,[e[20]||(e[20]=t("b",null,"Nav:",-1)),t("div",null,k(l(M)(l(d)))+"đ",1)]),t("div",Ne,[t("div",null,[e[21]||(e[21]=t("b",null,"Sức mua:",-1)),t("span",je,k(l(M)((q=l(P))==null?void 0:q.qmax)),1)]),t("div",De,k(l(M)(2e8))+"đ",1)])]),t("div",$e,[t("div",Ae,[e[22]||(e[22]=L(" Trần ")),t("div",Fe,k(l(B).tran),1)]),t("div",Oe,[e[23]||(e[23]=L(" TC ")),t("div",qe,k(l(B).tc),1)]),t("div",Ee,[e[24]||(e[24]=L(" Sàn ")),t("div",Ge,k(l(B).san),1)])]),t("div",null,[e[25]||(e[25]=t("div",{class:"flex justify-between font-semibold mt-2 mb-0.5"},[t("div",null,"Bước giá"),t("div",null,"Khối lượng")],-1)),r(pe,{mode:"list",list:(E=l(w))==null?void 0:E.list},null,8,["list"])])])])]),l(W).trading_token?(V(),g("div",Ke,[t("button",{class:"rounded-full py-1 px-2 min-w-48 bg-base-primary",onClick:e[12]||(e[12]=(...n)=>l(Z)&&l(Z)(...n))}," Đăng nhập để giao dịch ")])):I("",!0)])}}};export{et as default};
