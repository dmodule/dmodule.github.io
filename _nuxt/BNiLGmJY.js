import{bL as he,bs as g,bq as V,bQ as ce,br as z,bu as ze,cG as ge,r as p,a_ as $,b3 as X,bd as xe,bb as ue,cH as q,bI as J,bO as Pe,bg as re,bf as we,cI as F,bc as Me,bx as o,ba as ke,bU as Ce,cq as Ee,by as v,bz as B,bA as ve,bW as Q,bB as Re,bC as Te,bD as fe,c1 as Ne,bP as Be,bY as $e,bJ as Ie,b$ as De,b_ as Ve,cz as Ue}from"./B5CNXMPg.js";import{c as qe,b as Le,u as Ae,j as Oe}from"./BBm5foIw.js";import{e as K}from"./CFXoz_N7.js";import Fe from"./Ac-1ZxZv.js";import He from"./DInbXJDT.js";import Ge from"./idTbekpK.js";import We from"./opq49lCb.js";import je from"./DkoCmusq.js";import Je from"./DcentHaN.js";import Xe from"./D4Jv273n.js";import Ye from"./DmpUgs9g.js";import"./CbGsoO7p.js";import"./BLVB0qGI.js";import"./DdDBkiWh.js";import"./3YHVM6WK.js";import"./-Pa_sf8E.js";import"./DcaIXLYp.js";import"./tTl_t_7N.js";import"./D1XOgQPg.js";import"./CtkwUNzT.js";import"./CVZT9MuQ.js";import"./D0QZyhSl.js";import"./BCqZNjps.js";import"./DxqHYnwt.js";import"./u70cJacw.js";const Ze={props:{scale:{type:Number,default:1}},computed:{width(){return 360*this.scale}}};function Qe(U,b,f,m,C,a){return g(),V("div",{class:"flex-none relative flex justify-center",style:ce({width:a.width+"px"})},[(g(),V("svg",{class:"text-base-bg-300 absolute inset-0 origin-top-left",style:ce({transform:`scale(${f.scale})`}),width:"360",height:"48",viewBox:"0 0 360 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b[0]||(b[0]=[z("path",{d:"M357.237 2.82376e-05C398.658 2.82376e-05 -39.9387 -3.52971e-05 2.95743 2.82376e-05C45.8536 9.17724e-05 66.301 48 115.04 48H251.002C304.338 48 315.815 2.82376e-05 357.237 2.82376e-05Z",fill:"currentColor"},null,-1)]),4)),ze(U.$slots,"default")],4)}const Ke=he(Ze,[["render",Qe]]),pe={__name:"splitpanes",props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],setup(U,{emit:b}){const f=b,m=U,C=ge(),a=p([]),x=$(()=>a.value.length),_=$(()=>a.value.reduce((e,t)=>(e[~~t.id]=t)&&e,{})),P=p(null),E=p(!1),d=p({mouseDown:!1,dragging:!1,activeSplitter:null}),S=p({splitter:null,timeoutId:null}),I=()=>{document.addEventListener("mousemove",D,{passive:!1}),document.addEventListener("mouseup",r),"ontouchstart"in window&&(document.addEventListener("touchmove",D,{passive:!1}),document.addEventListener("touchend",r))},w=()=>{document.removeEventListener("mousemove",D,{passive:!1}),document.removeEventListener("mouseup",r),"ontouchstart"in window&&(document.removeEventListener("touchmove",D,{passive:!1}),document.removeEventListener("touchend",r))},L=(e,t)=>{I(),d.value.mouseDown=!0,d.value.activeSplitter=t},D=e=>{d.value.mouseDown&&(e.preventDefault(),d.value.dragging=!0,te(Z(e)),f("resize",a.value.map(t=>({min:t.min,max:t.max,size:t.size}))))},r=()=>{d.value.dragging&&f("resized",a.value.map(e=>({min:e.min,max:e.max,size:e.size}))),d.value.mouseDown=!1,setTimeout(()=>{d.value.dragging=!1,w()},100)},R=(e,t)=>{"ontouchstart"in window&&(e.preventDefault(),m.dblClickSplitter&&(S.value.splitter===t?(clearTimeout(S.value.timeoutId),S.value.timeoutId=null,M(e,t),S.value.splitter=null):(S.value.splitter=t,S.value.timeoutId=setTimeout(()=>{S.value.splitter=null},500)))),d.value.dragging||f("splitter-click",a.value[t])},M=(e,t)=>{let s=0;a.value=a.value.map((n,i)=>(n.size=i===t?n.max:n.min,i!==t&&(s+=n.min),n)),a.value[t].size-=s,f("pane-maximize",a.value[t]),f("resized",a.value.map(n=>({min:n.min,max:n.max,size:n.size})))},Y=(e,t)=>{f("pane-click",_.value[t])},Z=e=>{const t=P.value.getBoundingClientRect(),{clientX:s,clientY:n}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:s-t.left,y:n-t.top}},H=e=>{e=e[m.horizontal?"y":"x"];const t=P.value[m.horizontal?"clientHeight":"clientWidth"];return m.rtl&&!m.horizontal&&(e=t-e),e*100/t},te=e=>{const t=d.value.activeSplitter;let s={prevPanesSize:G(t),nextPanesSize:u(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const n=0+(m.pushOtherPanes?0:s.prevPanesSize),i=100-(m.pushOtherPanes?0:s.nextPanesSize),l=Math.max(Math.min(H(e),i),n);let c=[t,t+1],h=a.value[c[0]]||null,N=a.value[c[1]]||null;const me=h.max<100&&l>=h.max+s.prevPanesSize,ye=N.max<100&&l<=100-(N.max+u(t+1));if(me||ye){me?(h.size=h.max,N.size=Math.max(100-h.max-s.prevPanesSize-s.nextPanesSize,0)):(h.size=Math.max(100-N.max-s.prevPanesSize-u(t+1),0),N.size=N.max);return}if(m.pushOtherPanes){const de=ne(s,l);if(!de)return;({sums:s,panesToResize:c}=de),h=a.value[c[0]]||null,N=a.value[c[1]]||null}h!==null&&(h.size=Math.min(Math.max(l-s.prevPanesSize-s.prevReachedMinPanes,h.min),h.max)),N!==null&&(N.size=Math.min(Math.max(100-l-s.nextPanesSize-s.nextReachedMinPanes,N.min),N.max))},ne=(e,t)=>{const s=d.value.activeSplitter,n=[s,s+1];return t<e.prevPanesSize+a.value[n[0]].min&&(n[0]=y(s).index,e.prevReachedMinPanes=0,n[0]<s&&a.value.forEach((i,l)=>{l>n[0]&&l<=s&&(i.size=i.min,e.prevReachedMinPanes+=i.min)}),e.prevPanesSize=G(n[0]),n[0]===void 0)?(e.prevReachedMinPanes=0,a.value[0].size=a.value[0].min,a.value.forEach((i,l)=>{l>0&&l<=s&&(i.size=i.min,e.prevReachedMinPanes+=i.min)}),a.value[n[1]].size=100-e.prevReachedMinPanes-a.value[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-a.value[n[1]].min&&(n[1]=T(s).index,e.nextReachedMinPanes=0,n[1]>s+1&&a.value.forEach((i,l)=>{l>s&&l<n[1]&&(i.size=i.min,e.nextReachedMinPanes+=i.min)}),e.nextPanesSize=u(n[1]-1),n[1]===void 0)?(e.nextReachedMinPanes=0,a.value[x.value-1].size=a.value[x.value-1].min.value,a.value.forEach((i,l)=>{l<x.value-1&&l>=s+1&&(i.size=i.min,e.nextReachedMinPanes+=i.min)}),a.value[n[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-a.value[x.value-1].min-e.nextPanesSize.value,null):{sums:e,panesToResize:n}},G=e=>a.value.reduce((t,s,n)=>t+(n<e?s.size:0),0),u=e=>a.value.reduce((t,s,n)=>t+(n>e+1?s.size:0),0),y=e=>[...a.value].reverse().find(s=>s.index<e&&s.size>s.min)||{},T=e=>a.value.find(s=>s.index>e+1&&s.size>s.min)||{},A=()=>{var t;Array.from(((t=P.value)==null?void 0:t.children)||[]).forEach(s=>{const n=s.classList.contains("splitpanes__pane"),i=s.classList.contains("splitpanes__splitter");!n&&!i&&(s.remove(),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},W=(e,t,s=!1)=>{const n=e-1,i=document.createElement("button");i.classList.add("splitpanes__splitter","bg-base-neutral"),s||(i.onmousedown=l=>L(l,n),typeof window<"u"&&"ontouchstart"in window&&(i.ontouchstart=l=>L(l,n)),i.onclick=l=>R(l,n+1)),m.dblClickSplitter&&(i.ondblclick=l=>M(l,n+1)),t.parentNode.insertBefore(i,t)},se=e=>{e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.remove()},O=()=>{var s;const e=Array.from(((s=P.value)==null?void 0:s.children)||[]);e.forEach(n=>{n.className.includes("splitpanes__splitter")&&se(n)});let t=0;e.forEach(n=>{n.className.includes("splitpanes__pane")&&(!t&&m.firstSplitter?W(t,n,!0):t&&W(t,n),t++)})},ie=({uid:e,...t})=>{const s=_.value[e];Object.entries(t).forEach(([n,i])=>s[n]=i)},ae=e=>{var s;let t=-1;Array.from(((s=P.value)==null?void 0:s.children)||[]).some(n=>(n.className.includes("splitpanes__pane")&&t++,n.isSameNode(e.el))),a.value.splice(t,0,{...e,index:t}),a.value.forEach((n,i)=>n.index=i),E.value&&re(()=>{O(),j({addedPane:a.value[t]}),f("pane-add",{index:t,panes:a.value.map(n=>({min:n.min,max:n.max,size:n.size}))})})},k=e=>{const t=a.value.findIndex(n=>n.id===e),s=a.value.splice(t,1)[0];a.value.forEach((n,i)=>n.index=i),re(()=>{O(),j({removedPane:{...s,index:t}}),f("pane-remove",{removed:s,panes:a.value.map(n=>({min:n.min,max:n.max,size:n.size}))})})},j=(e={})=>{!e.addedPane&&!e.removedPane?_e():a.value.some(t=>t.givenSize!==null||t.min||t.max<100)?be(e):le(),E.value&&f("resized",a.value.map(t=>({min:t.min,max:t.max,size:t.size})))},le=()=>{const e=100/x.value;let t=0;const s=[],n=[];a.value.forEach(i=>{i.size=Math.max(Math.min(e,i.max),i.min),t-=i.size,i.size>=i.max&&s.push(i.id),i.size<=i.min&&n.push(i.id)}),t>.1&&oe(t,s,n)},_e=()=>{let e=100;const t=[],s=[];let n=0;a.value.forEach(l=>{e-=l.size,l.givenSize!==null&&n++,l.size>=l.max&&t.push(l.id),l.size<=l.min&&s.push(l.id)});let i=100;e>.1&&(a.value.forEach(l=>{l.givenSize===null&&(l.size=Math.max(Math.min(e/(x.value-n),l.max),l.min)),i-=l.size}),i>.1&&oe(i,t,s))},be=({addedPane:e,removedPane:t}={})=>{let s=100/x.value,n=0;const i=[],l=[];(e==null?void 0:e.givenSize)!==null&&(s=(100-e.givenSize)/(x.value-1).value),a.value.forEach(c=>{n-=c.size,c.size>=c.max&&i.push(c.id),c.size<=c.min&&l.push(c.id)}),!(Math.abs(n)<.1)&&(a.value.forEach(c=>{(e==null?void 0:e.givenSize)!==null&&(e==null?void 0:e.id)===c.id||(c.size=Math.max(Math.min(s,c.max),c.min)),n-=c.size,c.size>=c.max&&i.push(c.id),c.size<=c.min&&l.push(c.id)}),n>.1&&oe(n,i,l))},oe=(e,t,s)=>{let n;e>0?n=e/(x.value-t.length):n=e/(x.value-s.length),a.value.forEach((i,l)=>{if(e>0&&!t.includes(i.id)){const c=Math.max(Math.min(i.size+n,i.max),i.min),h=c-i.size;e-=h,i.size=c}else if(!s.includes(i.id)){const c=Math.max(Math.min(i.size+n,i.max),i.min),h=c-i.size;e-=h,i.size=c}}),Math.abs(e)>.1&&re(()=>{E.value&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})};X(()=>m.firstSplitter,()=>O()),X(()=>m.dblClickSplitter,e=>{[...P.value.querySelectorAll(".splitpanes__splitter")].forEach((s,n)=>{s.ondblclick=e?i=>M(i,n):void 0})}),xe(()=>E.value=!1),ue(()=>{A(),O(),j(),f("ready"),E.value=!0});const Se=()=>{var e;return we("div",{ref:P,class:["splitpanes",`splitpanes--${m.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":d.value.dragging}]},(e=C.default)==null?void 0:e.call(C))};return q("panes",a),q("indexedPanes",_),q("horizontal",$(()=>m.horizontal)),q("requestUpdate",ie),q("onPaneAdd",ae),q("onPaneRemove",k),q("onPaneClick",Y),(e,t)=>(g(),J(Pe(Se)))}},ee={__name:"pane",props:{size:{type:[Number,String]},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},setup(U){var D;const b=U,f=F("requestUpdate"),m=F("onPaneAdd"),C=F("horizontal"),a=F("onPaneRemove"),x=F("onPaneClick"),_=(D=Me())==null?void 0:D.uid,P=F("indexedPanes"),E=$(()=>P.value[_]),d=p(null),S=$(()=>{const r=isNaN(b.size)||b.size===void 0?0:parseFloat(b.size);return Math.max(Math.min(r,w.value),I.value)}),I=$(()=>{const r=parseFloat(b.minSize);return isNaN(r)?0:r}),w=$(()=>{const r=parseFloat(b.maxSize);return isNaN(r)?100:r}),L=$(()=>{var r;return`${C.value?"height":"width"}: ${(r=E.value)==null?void 0:r.size}%`});return ue(()=>{m({id:_,el:d.value,min:I.value,max:w.value,givenSize:b.size===void 0?null:S.value,size:S.value})}),X(()=>S.value,r=>f({uid:_,size:r})),X(()=>I.value,r=>f({uid:_,min:r})),X(()=>w.value,r=>f({uid:_,max:r})),xe(()=>a(_)),(r,R)=>(g(),V("div",{ref_key:"paneEl",ref:d,class:"splitpanes__pane",onClick:R[0]||(R[0]=M=>o(x)(M,r._.uid)),style:ce(L.value)},[ze(r.$slots,"default")],4))}},et={class:"rounded-finsc overflow-hidden h-full w-full text-base bg-base-300 flex flex-col justify-between"},tt={class:"flex-none flex justify-between items-start relative z-10"},nt={class:"max-w-[calc(50%-155px)] flex-1 flex items-center p-1"},st={class:"text-sm bg-base-300"},it={class:"p-3"},at={class:"w-full overflow-hidden -mr-6"},lt=["onClick"],ot={class:"bg-white/5 rounded-full relative flex items-center text-center py-1 gap-0 divide-x divide-dashed divide-base-neutral"},rt={class:"px-3 flex items-center"},ct={class:"px-3 flex items-center"},ut={class:"max-w-[calc(50%-155px)] flex-1 p-2 ml-2"},mt={key:0,class:"flex items-center"},dt={class:"h-[calc(100%-44px)]"},vt={class:"-mx-1 h-full overflow-auto"},ft={key:1,class:"flex flex-col"},pt={class:"flex-1 overflow-hidden relative"},ht={__name:"BoxTV",setup(U){const b=["FPT","HPG","TCB","MSN","VIC","MWG","VNM","VND","DGC","DPM","BSR"],{emit:f}=qe(),m=p(1),C=p(""),a=p(null),x=p(null),_=p(!1),P=p(null),E=p(!0),d=p(70),S=()=>{var T;E.value=!E.value;let u=90;const y=(T=P.value)==null?void 0:T.$el;if(y){const A=y.offsetHeight;u=Number((A-29)/A*100).toFixed(2)}d.value<u?d.value=u:d.value=70},I=Le(),w=$(()=>I.syms),L=$(()=>b.filter(u=>!w.value.includes(u))),D=$(()=>I.auth),r=Ae("symbolLocal","FPT"),R=p({}),M=p({}),Y=u=>{r.value===u.symbol&&(R.value=u)},Z=u=>{r.value===u.symbol&&(M.value=u)},H=u=>{R.value={},M.value={},f("eSymbol",{symbol:u}),r.value=u,x.value.updateSymbol(u),m.value++},te=u=>{w.value.includes(u)||w.value.push(u),I.setSyms(w.value)},ne=u=>{const y=w.value.filter(T=>T!==u);I.setSyms(y),m.value++},G=p([]);return ue(async()=>{f("eSymbol",{symbol:r.value}),G.value=await Oe("/static/tv/data/symbol.json")}),ke(()=>{K.on("eSI",Y),K.on("eTP",Z)}),Ce(()=>{K.off("eSI",Y),K.off("eTP",Z)}),(u,y)=>{const T=$e,A=Ie,W=De,se=Ve,O=Ee("Vue3Marquee"),ie=Ue,ae=Ke;return g(),V("div",et,[z("div",tt,[z("div",nt,[v(se,{popper:{placement:"bottom-start"}},{panel:B(()=>[z("div",st,[z("div",it,[v(W,{modelValue:o(C),"onUpdate:modelValue":y[0]||(y[0]=k=>ve(C)?C.value=k:null),icon:"i-ri-search-line",size:"sm",color:"white",trailing:!1,placeholder:"Search..."},null,8,["modelValue"])]),v(Ye,{search:o(C),items:o(G),onChangeSymbol:te},null,8,["search","items"])])]),default:B(()=>[v(A,{popper:{placement:"right"},text:"Thêm mã quan tâm"},{default:B(()=>[z("button",{class:Q(["bg-white/5 hover:bg-base-100 rounded-full p-2 flex items-center",{"bg-base-300":o(L).length===0}])},[v(T,{name:"i-ri-add-line",size:"20"})],2)]),_:1})]),_:1}),z("div",at,[(g(),J(O,{duration:30,key:o(m)},{default:B(()=>[(g(!0),V(Re,null,Te(o(w),(k,j)=>(g(),V("div",{key:j,class:Q(["rounded-full px-3 py-1 border border-transparent whitespace-nowrap flex items-center mr-3",o(r)===k?"bg-base-100":"border-base-neutral"])},[z("span",{class:"cursor-pointer hover:text-base-primary",onClick:le=>H(k)},fe(k),9,lt),v(T,{name:"i-ri-close-line",size:"16",class:"ml-1 cursor-pointer hover:text-base-secondary",onClick:le=>ne(k)},null,8,["onClick"])],2))),128))]),_:1}))])]),v(ae,{scale:.86},{default:B(()=>[z("div",ot,[z("div",rt,[v(Fe,{symbol:o(r)},null,8,["symbol"])]),z("div",ct,[v(ie,{modelValue:o(_),"onUpdate:modelValue":y[1]||(y[1]=k=>ve(_)?_.value=k:null),size:"xl","on-icon":"i-ri-exchange-dollar-line","off-icon":"i-ri-funds-line",ui:{inactive:"bg-yellow-500",icon:{off:"text-yellow-500"}}},null,8,["modelValue"])])])]),_:1}),z("div",ut,[o(D).name?(g(),V("div",mt,[v(T,{name:"i-ri-lock-line",class:"bg-base-primary text-xl mx-1"}),Ne(" Xin chào ! "+fe(o(D).name),1)])):Be("",!0)])]),z("div",dt,[v(o(pe),{class:"default-theme"},{default:B(()=>[v(o(ee),{size:75,"min-size":60},{default:B(()=>[v(o(pe),{ref_key:"splitVerRef",ref:P,class:"default-theme",horizontal:"",onResize:y[2]||(y[2]=k=>d.value=k[0].size)},{default:B(()=>[v(o(ee),{size:o(d),"min-size":50},{default:B(()=>[v(He,{ref_key:"tvChart",ref:x,symbol:o(r),dataSI:o(R),dataTP:o(M),"onUpdate:symbol":H},null,8,["symbol","dataSI","dataTP"]),v(Ge,{symbol:o(r),dataSI:o(R),dataTP:o(M)},null,8,["symbol","dataSI","dataTP"])]),_:1},8,["size"]),v(o(ee),{size:100-o(d)},{default:B(()=>[z("button",{onClick:S,class:Q(["absolute z-10 left-1/2 -translate-x-1/2 mt-2 rounded-full w-10 h-2 leading-0 hover:bg-yellow-600 hover:text-black outline-none",{"bg-yellow-500 text-black":o(d)>70}])},[v(T,{name:"ri-arrow-up-s-line",class:Q(["h-4 w-4 -mt-1 block mx-auto",{"rotate-180":o(d)<=70}])},null,8,["class"])],2),(g(),J(Je,{key:o(m),tvChartWrap:o(a),show:o(E),onClickSymbol:H},null,8,["tvChartWrap","show"]))]),_:1},8,["size"])]),_:1},512)]),_:1}),v(o(ee),{size:25},{default:B(()=>[z("div",vt,[o(_)?(g(),J(We,{key:0,symbol:o(r),dataSI:o(R),dataTP:o(M)},null,8,["symbol","dataSI","dataTP"])):(g(),V("div",ft,[(g(),J(je,{key:o(m),local:"",symbol:o(r),dataSI:o(R),dataTP:o(M)},null,8,["symbol","dataSI","dataTP"])),z("div",pt,[v(Xe,{symbol:o(r),style:{"border-radius":"0 !important"}},null,8,["symbol"])])]))])]),_:1})]),_:1})])])}}},Ot=he(ht,[["__scopeId","data-v-e8862123"]]);export{Ot as default};
