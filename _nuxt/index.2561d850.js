function v(t){return{issues:t}}function P(t){return{output:t}}function A(t,e){return{reason:t==null?void 0:t.reason,validation:e.validation,origin:(t==null?void 0:t.origin)||"value",message:e.message,input:e.input,path:e.path,abortEarly:t==null?void 0:t.abortEarly,abortPipeEarly:t==null?void 0:t.abortPipeEarly,skipPipe:t==null?void 0:t.skipPipe}}function w(t,e){return{reason:e,origin:t==null?void 0:t.origin,abortEarly:t==null?void 0:t.abortEarly,abortPipeEarly:t==null?void 0:t.abortPipeEarly,skipPipe:t==null?void 0:t.skipPipe}}function k(t,e,s,p){if(!e||!e.length||s!=null&&s.skipPipe)return P(t);let a,l,y=t;for(const E of e){const c=E(y);if(c.issues){a=a||w(s,p);for(const r of c.issues){const u=A(a,r);l?l.push(u):l=[u]}if(a.abortEarly||a.abortPipeEarly)break}else y=c.output}return l?v(l):P(y)}async function x(t,e,s,p){if(!e||!e.length||s!=null&&s.skipPipe)return P(t);let a,l,y=t;for(const E of e){const c=await E(y);if(c.issues){a=a||w(s,p);for(const r of c.issues){const u=A(a,r);l?l.push(u):l=[u]}if(a.abortEarly||a.abortPipeEarly)break}else y=c.output}return l?v(l):P(y)}function j(t,e){return Array.isArray(t)?[void 0,t]:[t,e]}function n(t){return typeof t=="function"?t():t}function I(t,e,s){return v([{validation:t,message:n(e),input:s}])}function z(t,e,s){if(!t||typeof t=="object"&&!Array.isArray(t)){const[l,y]=j(e,s);return[t,l,y]}const[p,a]=j(t,e);return[void 0,p,a]}function _(t,e,s,p,a,l){return{issues:[{reason:e,validation:s,origin:(t==null?void 0:t.origin)||"value",message:n(p),input:a,issues:l,abortEarly:t==null?void 0:t.abortEarly,abortPipeEarly:t==null?void 0:t.abortPipeEarly,skipPipe:t==null?void 0:t.skipPipe}]}}function D(t,e,s,p){const[a,l,y]=z(e,s,p);let E;return{type:"object",entries:t,rest:a,async:!0,async _parse(c,r){if(!c||typeof c!="object")return _(r,"type","object",l||"Invalid type",c);E=E||Object.entries(t);let u;const d={};return await Promise.all([Promise.all(E.map(async([b,m])=>{if(!(r!=null&&r.abortEarly&&u)){const g=c[b],h=await m._parse(g,r);if(!(r!=null&&r.abortEarly&&u))if(h.issues){const i={type:"object",input:c,key:b,value:g};for(const o of h.issues)o.path?o.path.unshift(i):o.path=[i],u==null||u.push(o);if(u||(u=h.issues),r!=null&&r.abortEarly)throw null}else(h.output!==void 0||b in c)&&(d[b]=h.output)}})),a&&Promise.all(Object.entries(c).map(async([b,m])=>{if(!(r!=null&&r.abortEarly&&u)&&!(b in t)){const g=await a._parse(m,r);if(!(r!=null&&r.abortEarly&&u))if(g.issues){const h={type:"object",input:c,key:b,value:m};for(const i of g.issues)i.path?i.path.unshift(h):i.path=[h],u==null||u.push(i);if(u||(u=g.issues),r!=null&&r.abortEarly)throw null}else d[b]=g.output}}))]).catch(()=>null),u?v(u):x(d,y,r,"object")}}}function L(t,e){const[s,p]=j(t,e);return{type:"string",async:!1,_parse(a,l){return typeof a!="string"?_(l,"type","string",s||"Invalid type",a):k(a,p,l,"string")}}}var O=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu;function M(t){return e=>O.test(e)?P(e):I("email",t||"Invalid email",e)}function R(t,e){return s=>s.length<t?I("min_length",e||"Invalid length",s):P(s)}export{M as e,R as m,D as o,L as s};
