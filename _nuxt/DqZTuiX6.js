import{r as j,C as D,m as me,h as F,o as _,A as f,w as P,c as k,s as g,H as G,a as I,t as L,b as $,q as U,D as A,B as H,_ as ee,k as ie,I as te,Q as ae,v as ce,n as w,aB as ye,d as J}from"./Bp7PwLku.js";import se from"./CpYseH1s.js";import _e from"./DQ-gKx9C.js";import he from"./Br5DmHqJ.js";import Ve from"./BN_RnzKB.js";import be from"./4S6JA_Y5.js";import fe from"./FvdUzAv5.js";import Y from"./CrWC-Jxx.js";import Ue from"./CduhSf2s.js";import ve from"./CtPpEL9c.js";import $e from"./DnMUcxvX.js";import xe from"./83s94Mis.js";import{e as Ee,g as Ie,d as R,h as we,j as Pe,k as Se,l as je,p as ke}from"./DHFOe2EN.js";import Re from"./BdaYeh12.js";const Ae={class:"truncate"},Ce={__name:"PickStyle",props:{modelValue:{},color:{type:Boolean,default:!1},options:{type:Object,default(){return{}}},icon:{type:String,default:"i-ri-palette-line"}},emits:["update:modelValue"],setup(e,{emit:a}){const t=a,s=e,l=j(null),n=D({get:()=>{const r=[];for(const p in s.options){const m={};m.label=p,m.value=s.options[p],r.push(m)}return r}});return me(()=>l.value,r=>{t("update:modelValue",r)}),F(()=>{l.value=s.modelValue}),(r,p)=>{const m=H,o=se;return _(),f(o,{modelValue:U(l),"onUpdate:modelValue":p[0]||(p[0]=c=>A(l)?l.value=c:null),options:U(n),"value-attribute":"label","option-attribute":"label",searchable:"","searchable-placeholder":"Search ..."},{option:P(({option:c})=>[e.color?(_(),k("span",{key:0,class:g(["flex-shrink-0 w-2 h-2 mt-px rounded-full",c.value.replace("text","bg")])},null,2)):G("",!0),I("span",Ae,L(c.label),1)]),default:P(()=>[$(m,{size:"2xs",square:"",icon:e.icon,color:"white"},null,8,["icon"])]),_:1},8,["modelValue","options"])}}},De={};function Be(e,a){const t=H,s=Y;return _(),f(s,{placeholder:"Link Image",ui:{icon:{trailing:{pointer:""}}}},{trailing:P(()=>[$(t,{icon:"i-ri-upload-cloud-2-line",size:"sm",color:"gray",square:"",variant:"solid"})]),_:1})}const Te=ee(De,[["render",Be]]);function W(e,a,t,s,l){return{issues:[{context:e,reference:a,input:t,label:s,received:l}]}}function Q(e){return{output:e}}function C(e,a){return Array.isArray(e)?[void 0,e]:[e,a]}var M;function Me(e){return M==null?void 0:M.get(e)}var N;function Ne(e){return N==null?void 0:N.get(e)}var O;function Oe(e,a){var t;return(t=O==null?void 0:O.get(e))==null?void 0:t.get(a)}function le(e,a,t,s,l){const n=a.message??Oe(t,l.lang)??(e?Ne(l.lang):null)??(s==null?void 0:s.message)??Me(l.lang)??l.message;return typeof n=="function"?n(l):n}function B(e,a,t){return{typed:e,output:a,issues:t}}function oe(e){let a=typeof e;return a==="object"&&(a=e?Object.getPrototypeOf(e).constructor.name:"null"),a==="string"?`"${e}"`:a==="number"||a==="bigint"||a==="boolean"?`${e}`:a}function ne(e,a,t){const s=t.received??oe(t.input),l={reason:e.type,context:t.context.type,expected:t.context.expects,received:s,message:`Invalid ${t.label}: ${t.context.expects?`Expected ${t.context.expects} but r`:"R"}eceived ${s}`,input:t.input,requirement:t.context.requirement,path:t.path,lang:a==null?void 0:a.lang,abortEarly:a==null?void 0:a.abortEarly,abortPipeEarly:a==null?void 0:a.abortPipeEarly,skipPipe:a==null?void 0:a.skipPipe};return l.message=le(!1,t.context,t.reference,a,l),l}function re(e,a,t,s){if(e.pipe&&!(t!=null&&t.skipPipe))for(const l of e.pipe){const n=l._parse(a);if(n.issues){for(const r of n.issues){const p=ne(e,t,r);s?s.push(p):s=[p]}if(t!=null&&t.abortEarly||t!=null&&t.abortPipeEarly)break}else a=n.output}return B(!0,a,s)}async function ze(e,a,t,s){if(e.pipe&&!(t!=null&&t.skipPipe))for(const l of e.pipe){const n=await l._parse(a);if(n.issues){for(const r of n.issues){const p=ne(e,t,r);s?s.push(p):s=[p]}if(t!=null&&t.abortEarly||t!=null&&t.abortPipeEarly)break}else a=n.output}return B(!0,a,s)}function Le(e,a,t){if(!e||typeof e=="object"&&!Array.isArray(e)){const[n,r]=C(a,t);return[e,n,r]}const[s,l]=C(e,a);return[void 0,s,l]}function X(e,a,t,s,l){const n=oe(t),r=e.expects,p={reason:"type",context:e.type,expected:r,received:n,message:`Invalid type: Expected ${r} but received ${n}`,input:t,path:l==null?void 0:l.path,issues:l==null?void 0:l.issues,lang:s==null?void 0:s.lang,abortEarly:s==null?void 0:s.abortEarly,abortPipeEarly:s==null?void 0:s.abortPipeEarly,skipPipe:s==null?void 0:s.skipPipe};return p.message=le(!0,e,a,s,p),{typed:!1,output:t,issues:[p]}}function qe(e,a,t){const[s,l]=C(a,t);return{type:"array",expects:"Array",async:!1,item:e,message:s,pipe:l,_parse(n,r){if(Array.isArray(n)){let p=!0,m;const o=[];for(let c=0;c<n.length;c++){const y=n[c],v=this.item._parse(y,r);if(v.issues){const b={type:"array",origin:"value",input:n,key:c,value:y};for(const x of v.issues)x.path?x.path.unshift(b):x.path=[b],m==null||m.push(x);if(m||(m=v.issues),r!=null&&r.abortEarly){p=!1;break}}v.typed||(p=!1),o.push(v.output)}return p?re(this,o,r,m):B(!1,o,m)}return X(this,qe,n,r)}}}function ue(e,a,t,s){const[l,n,r]=Le(a,t,s);let p;return{type:"object",expects:"Object",async:!0,entries:e,rest:l,message:n,pipe:r,async _parse(m,o){if(m&&typeof m=="object"){p=p??Object.entries(this.entries);let c=!0,y;const v={};return await Promise.all([Promise.all(p.map(async([b,x])=>{if(!(o!=null&&o.abortEarly&&y)){const h=m[b],V=await x._parse(h,o);if(!(o!=null&&o.abortEarly&&y)){if(V.issues){const E={type:"object",origin:"value",input:m,key:b,value:h};for(const S of V.issues)S.path?S.path.unshift(E):S.path=[E],y==null||y.push(S);if(y||(y=V.issues),o!=null&&o.abortEarly)throw c=!1,null}V.typed||(c=!1),(V.output!==void 0||b in m)&&(v[b]=V.output)}}})),this.rest&&Promise.all(Object.entries(m).map(async([b,x])=>{if(!(o!=null&&o.abortEarly&&y)&&!(b in this.entries)){const h=await this.rest._parse(x,o);if(!(o!=null&&o.abortEarly&&y)){if(h.issues){const V={type:"object",origin:"value",input:m,key:b,value:x};for(const E of h.issues)E.path?E.path.unshift(V):E.path=[V],y==null||y.push(E);if(y||(y=h.issues),o!=null&&o.abortEarly)throw c=!1,null}h.typed||(c=!1),v[b]=h.output}}}))]).catch(()=>null),c?ze(this,v,o,y):B(!1,v,y)}return X(this,ue,m,o)}}}function q(e,a){const[t,s]=C(e,a);return{type:"string",expects:"string",async:!1,message:t,pipe:s,_parse(l,n){return typeof l=="string"?re(this,l,n):X(this,q,l,n)}}}var Ze=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu;function Fe(e){return{type:"email",expects:null,async:!1,message:e,requirement:Ze,_parse(a){return this.requirement.test(a)?Q(a):W(this,Fe,a,"email")}}}function Z(e,a){return{type:"min_length",expects:`>=${e}`,async:!1,message:a,requirement:e,_parse(t){return t.length>=this.requirement?Q(t):W(this,Z,t,"length",`${t.length}`)}}}function de(e,a){return{type:"regex",expects:`${e}`,async:!1,message:a,requirement:e,_parse(t){return this.requirement.test(t)?Q(t):W(this,de,t,"format")}}}const Ge={__name:"Wrap",props:["modelValue"],emits:["update:modelValue","shut"],setup(e,{emit:a}){const{modelValue:t}=e,s=a,l=j(!1),n=j({}),r=()=>{s("shut")},p=D(()=>{if(t){const o={};for(const c in t)c==="title"?o[c]=q("Your title must be a string.",[Z(1,"The title must have at least 1 characters.")]):c==="phone"&&(o[c]=q("Your phone must be a number.",[Z(10,"The phone number must have at least 10 characters."),de(/[0-9]/,"Your phone must contain a number.")]));return ue(o)}});F(()=>{n.value=Ee(t),l.value=!0});const m=o=>{s("update:modelValue",o.state)};return(o,c)=>{const y=dt;return U(l)?(_(),f(y,{key:0,ref:"formRef",class:"form-card w-full","model-value":U(n),"onUpdate:modelValue":m,onShut:r,schema:U(p),hiddenReset:"",hiddenStyle:""},null,8,["model-value","schema"])):G("",!0)}}},He={class:"relative overflow-x-hidden flex-1"},Ye={class:"min-w-full table-fixed text-sm"},We={class:"border-b-2 border-base-neutral"},Qe=I("th",{class:"w-6"},null,-1),Xe={class:"capitalize"},Je={class:"py-1 text-sky-500",title:"Edit"},Ke={class:"py-1"},ge={class:"line-clamp-1 max-w-60"},et={class:"flex justify-end py-3"},z=5,tt={__name:"List",props:{modelValue:{},itemId:{type:String,default:"id"},itemTxt:{type:String,default:"title"}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,s=a,l=j([]),n=j(0),r=j(1),p=D(()=>l.value?l.value.slice((r.value-1)*z,r.value*z):0),m=j(null),o=j(!1),c=ie(),y=h=>j([{label:"Confirm",click:()=>console.log("Remove",h[t.itemId])}]),v=h=>[[{label:"Edit",icon:"i-ri-edit-box-line",click:()=>{o.value=!0,console.log("Edit",h[t.itemId]),m.value=h}},{label:"Delete",icon:"i-ri-delete-bin-line",click:()=>c.add({title:"Delete it !",actions:y(h)})}]],b=h=>{const V=l.value.findIndex(E=>E[t.itemId]===h[t.itemId]);l.value[V]=h,s("update:modelValue",l.value),n.value+=1},x=()=>{o.value=!1};return F(()=>{l.value=[...t.modelValue]}),(h,V)=>{const E=ce,S=Ue,T=ve,i=Ge,d=Re;return _(),k("div",null,[I("div",He,[I("table",Ye,[I("thead",null,[I("tr",We,[Qe,I("th",Xe,L(e.itemTxt),1)])]),(_(),k("tbody",{class:"divide-y divide-base-neutral",key:U(n)},[(_(!0),k(te,null,ae(U(p),(u,pe)=>(_(),k("tr",{key:pe},[I("td",Je,[$(S,{items:v(u),popper:{placement:"bottom-start"},ui:{width:"w-24"}},{default:P(()=>[$(E,{name:"i-ri-pencil-fill"})]),_:2},1032,["items"])]),I("td",Ke,[I("div",ge,L(u[e.itemTxt]),1)])]))),128))]))])]),I("div",et,[$(T,{modelValue:U(r),"onUpdate:modelValue":V[0]||(V[0]=u=>A(r)?r.value=u:null),"page-count":z,total:U(l).length},null,8,["modelValue","total"])]),$(d,{modelValue:U(o),"onUpdate:modelValue":V[1]||(V[1]=u=>A(o)?o.value=u:null),transition:!1},{default:P(()=>[$(i,{"model-value":U(m),"onUpdate:modelValue":b,onShut:x},null,8,["model-value"])]),_:1},8,["modelValue"])])}}},at={__name:"Hashtag",props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const{modelValue:t}=e,s=a,l=D({get(){return t.join()},set(n){s("update:modelValue",n.split(","))}});return(n,r)=>{const p=Y;return _(),f(p,w({modelValue:U(l),"onUpdate:modelValue":r[0]||(r[0]=m=>A(l)?l.value=m:null)},n.$attrs),null,16,["modelValue"])}}},K={className:"",attrs:{},state:{}},st={props:{schema:{},modelValue:{type:Object,default:()=>({...K})},hiddenReset:{type:Boolean,default:!1},hiddenStyle:{type:Boolean,default:!1}},data:()=>({ukey:0,initData:{},entry:{...K},closed:!1}),watch:{entry:{deep:!0,handler:Ie(function(e){const a=e.state||{};if(this.ukey>0){const t=ke(this.entry,a);this.$emit("update:modelValue",t),this.closed&&(this.closed=!1,this.$emit("shut"))}this.ukey++},300)}},methods:{submit(e){this.$emit("shut")},reset(){this.entry.attrs=R(this.initData.attrs),this.entry.state=R(this.initData.state)},close(){this.closed=!0,this.reset()}},mounted(){this.initData=R(this.modelValue),this.entry=R(this.modelValue)}},lt={key:6,class:"space-y-1"},ot={key:8},nt={key:10},rt={class:"flex gap-2 py-4"};function ut(e,a,t,s,l,n){const r=Ce,p=_e,m=se,o=he,c=Ve,y=be,v=fe,b=Y,x=Te,h=tt,V=at,E=$e,S=H,T=xe;return _(),f(T,{schema:t.schema,state:e.entry.state,onSubmit:n.submit},{default:P(()=>[I("div",{class:g(["grid gap-4",e.entry.className])},[(_(!0),k(te,null,ae(e.entry.attrs,(i,d)=>(_(),f(E,{key:d,name:d,label:i.type?("camelToCap"in e?e.camelToCap:U(we))(d):"",className:i.className},ye({default:P(()=>[i.type==="textarea"?(_(),f(p,w({key:0,modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u,autoresize:""},i.addon),null,16,["modelValue","onUpdate:modelValue"])):i.type==="select"?(_(),f(m,w({key:1,modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u,options:i.items},i.addon),null,16,["modelValue","onUpdate:modelValue","options"])):i.type==="toggle"?(_(),f(o,w({key:2,modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u},i.addon),null,16,["modelValue","onUpdate:modelValue"])):i.type==="checkbox"?(_(),f(c,w({key:3,modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u},i.addon),null,16,["modelValue","onUpdate:modelValue"])):i.type==="radio"?(_(),f(y,w({key:4,modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u,options:i.items},i.addon),null,16,["modelValue","onUpdate:modelValue","options"])):i.type==="range"?(_(),f(v,w({key:5,modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u},i.addon),null,16,["modelValue","onUpdate:modelValue"])):i.type==="objLink"?(_(),k("div",lt,[$(b,w({modelValue:e.entry.state[d].txt,"onUpdate:modelValue":u=>e.entry.state[d].txt=u},i.addon),null,16,["modelValue","onUpdate:modelValue"]),$(b,{modelValue:e.entry.state[d].src,"onUpdate:modelValue":u=>e.entry.state[d].src=u,placeholder:"Link"},null,8,["modelValue","onUpdate:modelValue"])])):i.type==="image"?(_(),f(x,{key:7,modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u},null,8,["modelValue","onUpdate:modelValue"])):i.type==="list"?(_(),k("div",ot,[$(h,w({modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u},i.addon),null,16,["modelValue","onUpdate:modelValue"])])):i.type==="hashtag"?(_(),f(V,w({key:9,modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u},i.addon),null,16,["modelValue","onUpdate:modelValue"])):i.type?(_(),f(b,w({key:11,modelValue:e.entry.state[d],"onUpdate:modelValue":u=>e.entry.state[d]=u},i.addon),null,16,["modelValue","onUpdate:modelValue"])):(_(),k("div",nt))]),_:2},[!t.hiddenStyle&&i.type&&i.type!=="list"&&i.type!=="link"?{name:"hint",fn:P(()=>[$(r,{modelValue:e.entry.attrs[d].opt.text,"onUpdate:modelValue":u=>e.entry.attrs[d].opt.text=u,options:"text"in e?e.text:U(Pe),icon:"i-ri-font-family"},null,8,["modelValue","onUpdate:modelValue","options"]),$(r,{modelValue:e.entry.attrs[d].opt.color,"onUpdate:modelValue":u=>e.entry.attrs[d].opt.color=u,options:"color"in e?e.color:U(Se),icon:"i-ri-palette-line",color:""},null,8,["modelValue","onUpdate:modelValue","options"]),$(r,{modelValue:e.entry.attrs[d].opt.bg,"onUpdate:modelValue":u=>e.entry.attrs[d].opt.bg=u,options:"bg"in e?e.bg:U(je),icon:"i-ri-paint-fill",color:""},null,8,["modelValue","onUpdate:modelValue","options"])]),key:"0"}:void 0]),1032,["name","label","className"]))),128))],2),I("div",rt,[$(S,{type:"submit"},{default:P(()=>[J("Submit")]),_:1}),t.hiddenReset?G("",!0):(_(),f(S,{key:0,color:"red",onClick:n.reset},{default:P(()=>[J("Reset")]),_:1},8,["onClick"]))])]),_:1},8,["schema","state","onSubmit"])}const dt=ee(st,[["render",ut]]);export{dt as _,qe as a,Ge as b,Fe as e,Z as m,ue as o,de as r,q as s};
