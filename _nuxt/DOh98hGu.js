import{_ as L}from"./Cd0KgIS5.js";import{r as y,b5 as d,aL as M,b4 as x,b2 as f,b9 as s,bd as $,ba as b,bb as h,b3 as t,bf as i,bD as Q,be as G,bw as q,bG as _,bx as U,b$ as Z}from"./CsE2J8A2.js";import{h as g,s as A}from"./Be7hkzXI.js";const H={class:"rounded-finsc overflow-hidden h-full w-full text-base bg-base-300 flex flex-col justify-between"},J={class:"flex text-center gap-4 px-4 py-2"},K={class:"flex justify-between w-full h-7"},O={class:"overflow-auto flex-1 px-2 mt-2"},W={class:"w-full table-auto text-sm overflow-hidden rounded-lg bg-white/5"},X={class:"divide-y divide-base-neutral"},Y={class:"relative py-1 px-4 text-center"},D={class:"relative py-1 px-4 text-center"},ee={class:"text-center px-4 py-2"},te={class:"w-full p-1"},ne={class:"flex justify-between px-2 font-semibold"},se={class:"text-green-600"},le={class:"text-red-600"},de={__name:"BoxStrength",setup(oe){const P=y(!1),m=y([]),w=y([]),c=y({}),B=y([]),R=(o,e)=>{const n=o-e,a=n/e*100;return{changed:n.toFixed(2),changedRatio:a.toFixed(1)}},C=(o,e,n)=>{const a=o.reduce((r,u)=>r+u.qtty,0),l=e.reduce((r,u)=>r+u.qtty,0);return a+l+n.matchQtty},V=(o,e,n)=>{const a=[],l=C(o,e,n);return e.reverse().forEach(r=>{const{changed:u,changedRatio:F}=R(r.price,n.basicPrice);a.push({price:r.price,quantity:r.qtty,changed:u,changedRatio:F,percentQuantity:(r.qtty/l*100).toFixed(2)})}),a.push({price:n.matchPrice,quantity:n.matchQtty,changed:n.changed.toFixed(2),changedRatio:n.changedRatio.toFixed(1),percentQuantity:(n.matchQtty/l*100).toFixed(2)}),o.forEach(r=>{const{changed:u,changedRatio:F}=R(r.price,n.basicPrice);a.push({price:r.price,quantity:r.qtty,changed:u,changedRatio:F,percentQuantity:(r.qtty/l*100).toFixed(2)})}),a},T=o=>o.length===0?0:o.reduce((e,n)=>e+n.qtty,0),p=d(()=>T(m.value)+(c.value.buyForeignQtty||0)),v=d(()=>T(w.value)+(c.value.sellForeignQtty||0)),j=d(()=>(p.value/(p.value+v.value)*100).toFixed(1)),z=d(()=>(v.value/(p.value+v.value)*100).toFixed(1)),I=d(()=>c.value.buyForeignQtty||0),S=d(()=>c.value.sellForeignQtty||0),k=d(()=>(I.value/p.value*100).toFixed(1)),N=d(()=>(S.value/v.value*100).toFixed(1)),E=(o,e,n=2e3)=>{A(()=>{const a=o();a!=null&&e(a)},n)};return M(()=>{E(()=>window._finSI,()=>{var o,e;m.value=((o=window._finTP)==null?void 0:o.bid)||[],w.value=((e=window._finTP)==null?void 0:e.ask)||[],c.value=window._finSI||{},B.value=V(m.value,w.value,c.value),P.value=!0},2e3)}),(o,e)=>{const n=L,a=Z;return x(),f("div",H,[s(P)?(x(),f($,{key:0},[b(a,{mode:"hover",popper:{placement:"left"}},{panel:h(()=>[t("div",J,[t("div",null,[e[0]||(e[0]=t("div",null,"Tổng mua",-1)),t("div",null,i(s(g)(s(p))),1)]),t("div",null,[e[1]||(e[1]=t("div",null,"Tổng bán",-1)),t("div",null,i(s(g)(s(v))),1)])])]),default:h(()=>[t("div",K,[t("div",{class:"bg-gradient-to-l from-green-400/80 border-green-400 rounded-tl-lg text-center py-1",style:Q({width:s(j)+"%"})},[b(n,{src:"/static/svg/bull.svg",class:"h-5 mx-auto",alt:"Bull"})],4),t("div",{class:"bg-gradient-to-r from-red-400/80 border-red-400 rounded-tr-lg text-center py-1",style:Q({width:s(z)+"%"})},[b(n,{src:"/static/svg/bear.svg",class:"h-5 mx-auto",alt:"Bear"})],4)])]),_:1}),t("div",O,[t("table",W,[t("tbody",X,[(x(!0),f($,null,G(s(B),(l,r)=>(x(),f("tr",{key:r,class:"relative"},[t("td",{class:q(["absolute bottom-0 left-0 h-full w-full",{"bg-gradient-to-r from-green-400/80":parseInt(l.changed)>=0,"bg-gradient-to-r from-red-400/20":parseInt(l.changed)<0}]),style:Q({"max-width":l.percentQuantity+"%"})},null,6),t("td",Y,i(s(g)(l.price)),1),t("td",D,i(s(g)(l.quantity)),1),t("td",{class:q(["relative py-1 px-4 text-center",parseInt(l.changed)>0?"text-green-600":"text-red-600"])},i(l.changed),3),t("td",{class:q(["relative py-1 px-4 text-center",{"text-green-400":parseInt(l.changedRatio)>=0,"text-red-400":parseInt(l.changedRatio)<0}])},i(l.changedRatio)+"% ",3)]))),128))])])]),b(a,{mode:"hover",popper:{placement:"left"}},{panel:h(()=>[t("div",ee,[e[2]||(e[2]=_(" Nước ngoài mua : Nước ngoài bán ")),t("div",null,i(`${s(g)(s(I))} (${s(k)}%) : ${s(g)(s(S))} (${s(N)}%)`),1),e[3]||(e[3]=t("div",null,"- - - - - -",-1)),e[4]||(e[4]=_(" Phần trăm biểu thị tỷ lệ mua bán của khối ngoại ")),e[5]||(e[5]=t("div",null,"(tính cả thỏa thuận) trên tổng khối lượng khớp.",-1))])]),default:h(()=>[t("div",te,[t("div",ne,[t("div",null,[e[6]||(e[6]=_(" Mua ")),t("span",se,i(s(k))+"%",1)]),t("div",null,[t("span",le,i(s(N))+"%",1),e[7]||(e[7]=_(" Bán "))])])])]),_:1})],64)):U("",!0)])}}};export{de as default};
