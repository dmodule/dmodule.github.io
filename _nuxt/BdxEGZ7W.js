import{bL as R,a_ as j,bs as s,bq as n,br as t,bB as B,bC as L,bW as x,bx as a,bD as o,r as A,bX as q,by as F,bA as G,cm as K,cu as U,bI as O,bP as P,bF as Z}from"./CJ_CGJpm.js";import{w as Q,a as W}from"./BVo3a_yY.js";import{u as C}from"./-Pa_sf8E.js";import{f as m}from"./BLRsUYzB.js";import{c as X,d as J,e as v,f as tt}from"./BlblDOJL.js";import"./DOh2-wJO.js";import"./DxqHYnwt.js";import"./DdDBkiWh.js";import"./B_qkIv1B.js";import"./BLVB0qGI.js";const et={class:"text-sm border-b border-base-200"},st={class:"flex gap-2 px-2 -mb-[1px]"},at=["disabled","onClick"],ot={__name:"Tabs",props:{modelValue:{default:null},items:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c,{emit:u}){const k=u,f=c,p=j({get:()=>f.modelValue,set:i=>{k("update:modelValue",i)}});return(i,N)=>(s(),n("div",et,[t("div",st,[(s(!0),n(B,null,L(c.items,(y,d)=>(s(),n("button",{key:d,type:"button",class:x(["px-2 py-1 border-b border-transparent",{"border-base-primary text-base-primary":a(p)===y.id}]),disabled:c.disabled,onClick:()=>{p.value=y.id}},o(y.name),11,at))),128))])]))}},nt=R(ot,[["__scopeId","data-v-9711a7bb"]]),rt={key:0},lt={class:"py-3"},it={class:"overflow-x-auto w-full px-1.5 max-h-screen text-sm"},dt={key:0,class:"min-h-10"},ct={key:0,class:"table text-sm text-center table-pin-rows table-pin-cols"},ut={key:0,class:"text-base-primary"},mt={key:1,class:"text-base-secondary"},pt={key:1,class:"table text-sm text-center table-pin-rows table-pin-cols"},yt={key:0,class:"text-base-primary"},ht={key:1,class:"text-base-secondary"},Nt={__name:"BoxCommand",props:{auth:{type:Object,default:()=>{}}},async setup(c){let u,k;const f=c,p=A(1),i=A(1),N=[{id:1,name:"Sổ lệnh thường"},{id:2,name:"Sổ lệnh điều kiện"}],y=[{id:"Pending",name:"chờ gửi",color:1},{id:"PendingNew",name:"chờ gửi",color:1},{id:"New",name:"chờ khớp",color:2},{id:"PartiallyFilled",name:"khớp một phần",color:2},{id:"Filled",name:"khớp toàn bộ",color:2},{id:"Rejected",name:"bị từ chối",color:0},{id:"Expired",name:"bị hết hạn trong phiên",color:0},{id:"DoneForDay",name:"lệnh hết hiệu lực khi hết phiên",color:0}],d=r=>{const l=y.find(g=>g.id.toLowerCase()===(r==null?void 0:r.toLowerCase()));return l||{}},S=async r=>{let l=null;i.value===2?l=await v(r):l=await tt(r),l.status&&p.value++},{data:T,status:E}=([u,k]=Q(()=>q("command",()=>i.value===2?X():J(),{watch:[f.auth,i,p]})),u=await u,k(),u);return(r,l)=>{var M;const g=nt,V=Z,I=W;return c.auth&&c.auth.trading_token?(s(),n("div",rt,[F(g,{modelValue:a(i),"onUpdate:modelValue":l[0]||(l[0]=e=>G(i)?i.value=e:null),items:N},null,8,["modelValue"]),t("div",lt,[t("div",it,[a(E)==="success"?(s(),n("div",dt,[a(i)===2?(s(),n("table",ct,[l[1]||(l[1]=t("thead",null,[t("tr",{class:"text-xs"},[t("th",{class:"py-1"},"Lệnh"),t("th",{class:"py-1 w-20"},"Mã/Tiền mặt"),t("th",{class:"py-1"},"Điều kiện"),t("th",{class:"py-1"},"Giá đặt"),t("th",{class:"py-1"},"Khối lượng"),t("th",{class:"py-1"},"Thời gian đặt"),t("th",{class:"py-1"},"Hết hạn"),t("th",{class:"py-1"},"Trạng thái"),t("th",{class:"py-1"})])],-1)),t("tbody",null,[(s(!0),n(B,null,L((M=a(T))==null?void 0:M.content,(e,w)=>{var h,b,_,D,Y,$,z,H;return K((s(),n("tr",{key:w},[t("td",null,[((h=e.targetOrder)==null?void 0:h.side)==="NB"?(s(),n("div",ut,"Mua")):(s(),n("div",mt,"Bán"))]),t("td",null,[t("div",{class:x(["px-1 py-0.5 text-white rounded-sm",[((b=e.targetOrder)==null?void 0:b.side)==="NB"?"bg-base-primary":"bg-base-secondary"]])},o(e.symbol),3)]),t("td",null,o(e.condition),1),t("td",null,o(a(m)((_=e.targetOrder)==null?void 0:_.price)),1),t("td",null,o(a(m)((D=e.targetOrder)==null?void 0:D.quantity)),1),t("td",null,o(("useDate"in r?r.useDate:a(C))(e.createdAt,"YYYY-MM-DD HH:mm")),1),t("td",null,o(("useDate"in r?r.useDate:a(C))((Y=e.timeInForce)==null?void 0:Y.expireTime,"YYYY-MM-DD HH:mm")),1),t("td",{class:x(["capitalize",[(($=d(e.status))==null?void 0:$.color)===1?"text-base-primary":((z=d(e.status))==null?void 0:z.color)===2?"text-yellow-500":"text-base-secondary"]])},o((H=d(e.status))==null?void 0:H.name),3),t("td",null,[F(V,{onClick:bt=>S(e.id),icon:"i-ri-close-line",color:"red",variant:"ghost","aria-label":"close",size:"xs",ui:{rounded:"rounded-full"}},null,8,["onClick"])])])),[[U,e.status!=="CANCELLED"]])}),128))])])):(s(),n("table",pt,[l[2]||(l[2]=t("thead",null,[t("tr",{class:"text-xs"},[t("th",{class:"py-1"},"Lệnh"),t("th",{class:"py-1 w-20"},"Mã/Tiền mặt"),t("th",{class:"py-1"},"Thời gian"),t("th",{class:"py-1"},"Giá đặt"),t("th",{class:"py-1"},"Giá khớp"),t("th",{class:"py-1"},"Khối lượng"),t("th",{class:"py-1"},"Trạng thái"),t("th",{class:"py-1"})])],-1)),t("tbody",null,[(s(!0),n(B,null,L(a(T),(e,w)=>{var h,b,_;return s(),n("tr",{key:w},[t("td",null,[e.side==="NB"?(s(),n("div",yt,"Mua")):(s(),n("div",ht,"Bán"))]),t("td",null,[t("div",{class:x(["px-1 py-0.5 text-white rounded-sm",[e.side==="NB"?"bg-base-primary":"bg-base-secondary"]])},o(e.symbol),3)]),t("td",null,o(("useDate"in r?r.useDate:a(C))(e.modifiedDate,"HH:mm")),1),t("td",null,o(a(m)(e.price)),1),t("td",null,o(a(m)(e.averagePrice)),1),t("td",null,o(a(m)(e.fillQuantity))+" / "+o(a(m)(e.quantity)),1),t("td",{class:x(["capitalize",[((h=d(e.orderStatus))==null?void 0:h.color)===1?"text-base-primary":((b=d(e.orderStatus))==null?void 0:b.color)===2?"text-yellow-500":"text-base-secondary"]])},o((_=d(e.orderStatus))==null?void 0:_.name),3),t("td",null,[e.orderStatus!=="Rejected"?(s(),O(V,{key:0,onClick:D=>S(e.id),icon:"i-ri-close-line",color:"red",variant:"ghost","aria-label":"close",size:"xs",ui:{rounded:"rounded-full"}},null,8,["onClick"])):P("",!0)])])}),128))])]))])):(s(),O(I,{key:1,height:"40px"}))])])])):P("",!0)}}};export{Nt as default};
