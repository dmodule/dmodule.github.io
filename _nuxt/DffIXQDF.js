import{r as L,a_ as m,bV as P,bb as M,bw as s,bs as i,bq as d,br as e,bO as w,bC as u,bx as z,by as _,bH as F,bT as H,bA as N,bB as R,bU as h,bP as U,cr as j}from"./BD89yi6W.js";import{u as K}from"./-Pa_sf8E.js";import{u as E,w as Q,h as Y,j as g,f as S}from"./DTastN19.js";import Z from"./CLMBoiZu.js";import{u as q}from"./Bdez09lO.js";import{a as G}from"./DgaNmZUo.js";import{s as O}from"./xIIEfSx2.js";import"./DdDBkiWh.js";import"./B39OMRwo.js";import"./DxqHYnwt.js";import"./BLVB0qGI.js";const W={key:0,class:"rounded-finsc overflow-hidden h-full w-full text-base bg-base-300 flex flex-col"},$={key:0,class:"flex-none h-[32px]"},J={class:"w-full relative flex justify-center"},X={class:"w-[180px] mx-auto relative"},ee={class:"text-base-bg-300 absolute inset-0 origin-top-left",width:"360",height:"48",viewBox:"0 0 360 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(0.5)"}},te={class:"flex justify-between text-xs -mt-6 px-4 pb-2"},se={class:"p-2 -mt-2"},oe={class:"overflow-x-auto w-full pb-32 max-h-screen rounded-lg bg-white/5"},ae={class:"table text-sm text-center table-pin-rows table-pin-cols"},le={colspan:"3"},re={class:"flex relative"},ne={class:"flex-1"},ie={class:"w-80 h-[600px]"},_e={__name:"BoxVolumn",props:{symbol:{type:String,default:""}},async setup(k){let c,f;const b=k,p=L(1),x=m(()=>b.symbol||E().symbol),y=m(()=>{var o;return(((o=n.value)==null?void 0:o.historyIntra)||[]).toReversed()}),B=m(()=>{var o;return(o=n.value)==null?void 0:o.historyIntra.reduce((a,r)=>a+r.Price*r.Volume,0)}),D=m(()=>{var o,a,r;return(r=(a=n.value)==null?void 0:a.historyIntra[((o=n.value)==null?void 0:o.historyIntra.length)-1])==null?void 0:r.TotalVolume}),C={colors:["#34c85e","#d73834","#ff7602"],type:"bar",height:"100%",horizontal:!0,stacked:!0,stroke:"smooth",strokeWidth:1,strokeDashes:0,markers:0,dark:!0,fillSolid:!0,animation:!1},V=q({baseURL:G().API_URI}),{data:n,status:ue}=([c,f]=Q(()=>P("intraday",()=>V.get(`IntradayQuotes?symbol=${x.value}`),{watch:[x,p]})),c=await c,f(),c),v=(o,a,r,t)=>{const l=new Date,T=new Date(l.getFullYear(),l.getMonth(),l.getDate(),o,a),A=new Date(l.getFullYear(),l.getMonth(),l.getDate(),r,t);return l>=T&&l<=A},I=()=>v(9,0,11,30)||v(13,0,15,0);return M(()=>{O(()=>{I()&&p.value++},5*1e3)}),(o,a)=>{const r=j;return s(Y)(s(y))?(i(),d("div",W,[b.symbol?w("",!0):(i(),d("div",$,[e("div",J,[e("div",X,[(i(),d("svg",ee,a[0]||(a[0]=[e("path",{d:"M357.237 2.82376e-05C398.658 2.82376e-05 -39.9387 -3.52971e-05 2.95743 2.82376e-05C45.8536 9.17724e-05 66.301 48 115.04 48H251.002C304.338 48 315.815 2.82376e-05 357.237 2.82376e-05Z",fill:"currentColor"},null,-1)]))),a[1]||(a[1]=e("div",{class:"bg-base-primary text-white rounded-full relative text-sm text-center px-2 w-24 mx-auto"}," Khớp lệnh ",-1))])])])),e("div",te,[e("div",null,[e("div",null,u(s(g)(s(D)))+" cổ",1)]),e("div",null,[e("div",null,u(s(g)(s(B),!0)),1)])]),e("div",se,[z(r,{mode:"hover",popper:{placement:"left-start"}},{panel:_(()=>[e("div",ie,[(i(),F(s(Z),H({key:s(p),categories:s(n).accumulatedVolumes.categories,series:s(n).accumulatedVolumes.series},C),null,16,["categories","series"]))])]),default:_(()=>[e("div",oe,[e("table",ae,[a[2]||(a[2]=e("thead",null,[e("tr",{class:"text-xs bg-base-primary"},[e("th",{class:"py-1 w-20"},"Thời gian"),e("th",{class:"py-1 w-20"},"Giá"),e("th",{class:"py-1"},"KL"),e("th",{class:"py-1 w-10"},"Lệnh")])],-1)),e("tbody",null,[(i(!0),d(N,null,R(s(y),(t,l)=>(i(),d("tr",{key:l},[e("td",null,u(("useDate"in o?o.useDate:s(K))(t.Date,"HH:mm:ss")),1),e("td",le,[e("div",re,[e("div",{class:h(["absolute bottom-0 left-0 h-full w-full rounded",{"bg-gradient-to-r from-green-400/20":t.Side==="B","bg-gradient-to-r from-red-400/20":t.Side==="S"}]),style:U({"max-width":t.percentQuantity+"%"})},null,6),e("div",{class:h(["flex-none w-20",{"text-yellow-600":t.Side===null,"text-green-600":t.Side==="B","text-red-600":t.Side==="S"}])},u(s(S)(t.Price)),3),e("div",ne,u(s(S)(t.Volume)),1),e("div",{class:h(["flex-none w-10 font-semibold",{"text-yellow-600":t.Side===null,"text-green-600":t.Side==="B","text-red-600":t.Side==="S"}])},u(t.Side==="B"?"M":t.Side==="S"?"B":"K"),3)])])]))),128))])])])]),_:1})])])):w("",!0)}}};export{_e as default};
