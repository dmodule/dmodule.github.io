import{_ as T}from"./Ch7rENOc.js";import{f as F,i as Z,b as K,c as U,_ as W}from"./BQpgF531.js";import{r as b,b5 as d,bA as J,aG as M,b4 as i,b2 as c,b3 as a,ba as _,bb as z,bd as y,be as w,b9 as r,bw as B,bf as h,bv as X,bx as ee,bh as te}from"./CsE2J8A2.js";import{u as se,w as ae}from"./FStRcmnm.js";import re from"./CGYfYq1i.js";import{h as oe}from"./Be7hkzXI.js";import{u as ne}from"./BgI-_88v.js";import{a as le}from"./BRcGTJt5.js";import"./Cd0KgIS5.js";import"./6bUBh_yt.js";import"./BLVB0qGI.js";import"./B7LlgBWf.js";const ie={class:"rounded-finsc overflow-hidden flex flex-col h-full w-full text-base bg-base-300"},ce={class:"flex flex-none justify-between"},ue={class:"text-sm h-full flex items-center pr-6 -ml-6 -mt-3 overflow-hidden"},de=["onClick"],fe={key:0,class:"px-6 pb-6 flex-1 flex flex-col overflow-auto -mt-6"},me={class:"flex-none -mx-4"},ve={class:"flex-none"},pe={class:"flex justify-between items-center"},be={class:"flex flex-wrap gap-1 min-w-32"},_e={class:"relative"},he={class:"absolute inset-y-0 -left-4 flex items-center"},xe={class:"flex gap-2 text-center"},ye={class:"absolute inset-y-0 -right-4 flex items-center"},we={class:"my-4 font-semibold"},ge={class:"flex-1"},Ce={class:"flex flex-wrap gap-1 min-w-32"},Se={class:"relative"},qe={class:"flex gap-2 text-center"},Ve={__name:"BoxFinance",async setup(Be){let x,$;const k={incomestatement:Z,balancesheet:K,cashflow:U},H={incomestatement:["revenue","grossProfit","postTaxProfit"],balancesheet:["asset","capital","equity"],cashflow:["fromSale","fromInvest","freeCashFlow"]},u=b("incomestatement"),Q=t=>{u.value=t},f=b(!0),A=t=>{f.value=t},V=se(),P=d(()=>V.symbol),j=(t,e)=>e==="yearOperationProfitGrowth"||e==="yearRevenueGrowth"||e==="yearShareHolderIncomeGrowth"||e==="quarterOperationProfitGrowth"||e==="quarterRevenueGrowth"||e==="quarterShareHolderIncomeGrowth"?(t*100).toFixed(1)+"%":t,Y=d(()=>{var e;const t=((e=C.value)==null?void 0:e.data)||[];return Object.keys(t[0]).filter(s=>s!=="ticker"&&s!=="quarter"&&s!=="year")}),G=d(()=>{var s;const t={};return(((s=C.value)==null?void 0:s.data)||[]).forEach(o=>{const l=o.quarter&&o.quarter<=4?`${o.year} Q${o.quarter}`:o.year;t[l]||(t[l]={}),Y.value.forEach(n=>{t[l][n]=o[n]||null})}),t}),I=d(()=>{const t=new Set(p.value),e={};for(const s of t)G.value[s]&&(e[s]=G.value[s]);return e}),g=d(()=>{var s;const e=(((s=C.value)==null?void 0:s.data)||[]).map(o=>o.quarter&&o.quarter<=4?`${o.year} Q${o.quarter}`:o.year);return[...new Set(e)].sort((o,l)=>l-o)}),m=b(0),v=b(4),p=d(()=>g.value.slice(m.value,v.value).sort((t,e)=>{const[s,o]=String(t).split(" Q").map(Number),[l,n]=String(e).split(" Q").map(Number);return s-l||(o||0)-(n||0)})),E=()=>{m.value>0&&(m.value-=4,v.value-=4)},D=()=>{v.value<g.value.length&&(m.value+=4,v.value+=4)},L={type:"bar",height:"200px",stroke:"smooth",strokeWidth:1,strokeDashes:0,markers:0,dark:!0,fillSolid:!0},N=b([]),O=ne({baseURL:le().API_FINSC}),{data:C,status:R}=([x,$]=ae(()=>J("finance",()=>O.get(`/scfa/${P.value}/${u.value}?yearly=${f.value}`),{watch:[P,u,f]})),x=await x,$(),x);return M(()=>p.value,t=>{N.value=H[u.value].map(e=>({name:k[u.value][e],data:t.map(s=>I.value[s][e])}))}),(t,e)=>{const s=T,o=W,l=te;return i(),c("div",ie,[a("div",ce,[_(s,{scale:.5,pos:"tl"},{default:z(()=>e[2]||(e[2]=[a("div",{class:"mr-10 mb-8 text-2xl rotate-[-32deg] font-semibold text-base-primary",title:"Báo cáo tài chính"},[a("div",{class:"animate-bounce"},"BCTC")],-1)])),_:1}),a("div",ue,[_(o,{class:"max-w-full"},{default:z(()=>[(i(!0),c(y,null,w(r(F),(n,S)=>(i(),c("button",{key:S,onClick:q=>Q(n.id),class:B(["rounded-full px-3 py-1 border border-transparent",r(u)===n.id?"bg-base-100":"border-base-neutral"])},h(n.name),11,de))),128))]),_:1})])]),r(R)==="success"?(i(),c("div",fe,[a("div",me,[_(r(re),X({categories:r(p),series:r(N)},L),null,16,["categories","series"])]),a("div",ve,[a("div",pe,[a("div",be,[a("button",{class:B(["px-3 py-1 rounded-full",{"bg-base-primary":r(f)}]),onClick:e[0]||(e[0]=n=>A(!0))}," Hàng Năm ",2),a("button",{class:B(["px-3 py-1 rounded-full",{"bg-base-primary":!r(f)}]),onClick:e[1]||(e[1]=n=>A(!1))}," Hàng Quý ",2)]),a("div",_e,[a("div",he,[_(l,{onClick:D,disabled:r(v)>=r(g).length,icon:"i-ri-arrow-left-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])]),a("div",xe,[(i(!0),c(y,null,w(r(p),n=>(i(),c("div",{key:n,class:"font-semibold w-14"},h(n),1))),128))]),a("div",ye,[_(l,{onClick:E,disabled:r(m)===0,icon:"i-ri-arrow-right-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])])])]),a("div",we,h(r(F)[r(u)]),1)]),a("div",ge,[(i(!0),c(y,null,w(r(Y),(n,S)=>(i(),c("div",{class:"flex justify-between items-center",key:S},[a("div",Ce,h(k[r(u)][n]),1),a("div",Se,[a("div",qe,[(i(!0),c(y,null,w(r(p),q=>(i(),c("div",{class:"w-14 my-1",key:q},h(r(oe)(j(r(I)[q][n],n))),1))),128))])])]))),128))])])):ee("",!0)])}}};export{Ve as default};
