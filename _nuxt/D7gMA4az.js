import{_ as K}from"./5826pbEE.js";import{r as _,b4 as v,bw as W,aG as Z,b3 as u,b1 as h,b2 as t,b9 as T,ba as O,bc as w,bd as C,bu as D,b8 as o,be as x,bt as J,bv as M,bg as X}from"./CHOppScM.js";import{a as Q,u as ee}from"./QN_8SaSm.js";import{w as te}from"./Cd555ZWs.js";import ne from"./DYThxCtz.js";import{u as se}from"./DpaPKDcZ.js";import"./BLVB0qGI.js";import"./B7LlgBWf.js";import"./DINjZ76J.js";import"./B6Lq9Mqd.js";import"./6bUBh_yt.js";const G=(e,n={})=>{const s={baseURL:Q().API_URL,headers:{Authorization:null},method:e.toUpperCase(),timeout:1e4,...n},d=ee().token;return d&&(s.headers.Authorization=d),s};function ae(e){return e!=null&&e.data&&typeof e.data=="string"&&e.data.length>0&&console.log(e.data),Promise.reject(e)}async function k(e,n,s,d={}){try{return await $fetch(n,e==="GET"||e==="DELETE"?{...G(e,d),params:s}:{...G(e,d),body:s})}catch(P){return ae(P)}}function oe(e={}){return{get:(n,s={})=>k("GET",n,s,e),post:(n,s={})=>k("POST",n,s,e),put:(n,s={})=>k("PUT",n,s,e),patch:(n,s={})=>k("PATCH",n,s,e),delete:(n,s={})=>k("DELETE",n,s,e)}}const $=[{id:"incomestatement",name:"Kết quả kinh doanh"},{id:"balancesheet",name:"Bảng cân đối kế toán"},{id:"cashflow",name:"Bảng dòng tiền"}],re={revenue:"Doanh thu thuần",yearRevenueGrowth:"TT doanh thu %YoY",quarterRevenueGrowth:"TT doanh thu %QoQ",costOfGoodSold:"Giá vốn hàng bán",grossProfit:"Lợi nhuận gộp",operationExpense:"Chi phí hoạt động",operationProfit:"Lợi nhuận hoạt động",yearOperationProfitGrowth:"TT lợi nhuận hoạt động %YoY",quarterOperationProfitGrowth:"TT lợi nhuận hoạt động %QoQ",interestExpense:"Chi phí lãi vay",preTaxProfit:"Lợi nhuận trước thuế",postTaxProfit:"Lợi nhuận sau thuế",shareHolderIncome:"Lợi nhuận dành cho cổ đông",yearShareHolderIncomeGrowth:"TT lợi nhuận cổ đông %YoY",quarterShareHolderIncomeGrowth:"TT lợi nhuận cổ đông %QoQ",investProfit:"Lợi nhuận từ đầu tư",serviceProfit:"Lợi nhuận từ dịch vụ",otherProfit:"Lợi nhuận khác",provisionExpense:"Chi phí dự phòng",operationIncome:"Thu nhập từ hoạt động kinh doanh",ebitda:"Lợi nhuận trước lãi vay, thuế và khấu hao (EBITDA)"},ie={shortAsset:"Tài sản ngắn hạn",cash:"Tiền và các khoản tương đương tiền",shortInvest:"Đầu tư ngắn hạn",shortReceivable:"Phải thu ngắn hạn",inventory:"Hàng tồn kho",longAsset:"Tài sản dài hạn",fixedAsset:"Tài sản cố định",asset:"Tổng tài sản",debt:"Nợ phải trả",shortDebt:"Nợ ngắn hạn",longDebt:"Nợ dài hạn",equity:"Vốn chủ sở hữu",capital:"Vốn điều lệ",centralBankDeposit:"Tiền gửi tại Ngân hàng Trung ương",otherBankDeposit:"Tiền gửi tại Ngân hàng khác",otherBankLoan:"Vay từ Ngân hàng khác",stockInvest:"Đầu tư chứng khoán",customerLoan:"Cho vay khách hàng",badLoan:"Nợ xấu",provision:"Dự phòng rủi ro tín dụng",netCustomerLoan:"Cho vay khách hàng ròng",otherAsset:"Tài sản khác",otherBankCredit:"Tín dụng từ Ngân hàng khác",oweOtherBank:"Nợ Ngân hàng khác",oweCentralBank:"Nợ Ngân hàng Trung ương",valuablePaper:"Giấy tờ có giá",payableInterest:"Lãi phải trả",receivableInterest:"Lãi phải thu",deposit:"Tiền gửi",otherDebt:"Nợ khác",fund:"Quỹ",unDistributedIncome:"Lợi nhuận chưa phân phối",minorShareHolderProfit:"Lợi nhuận của cổ đông thiểu số",payable:"Phải trả"},le={investCost:"Chi phí đầu tư",fromInvest:"Dòng tiền từ hoạt động đầu tư",fromFinancial:"Dòng tiền từ hoạt động tài chính",fromSale:"Dòng tiền từ hoạt động kinh doanh",freeCashFlow:"Dòng tiền tự do"},ce={class:"rounded-finsc overflow-hidden flex flex-col h-full w-full text-base bg-base-300"},ue={class:"flex flex-none justify-between"},he={class:"text-sm h-full flex items-center pr-6 -ml-6"},de={class:"flex gap-2 justify-around mt-6"},fe=["onClick"],ge={key:0,class:"px-6 pb-6 flex-1 flex flex-col overflow-hidden"},ve={class:"flex-none -mx-4"},pe={class:"flex-none"},be={class:"flex justify-between items-center"},me={class:"flex flex-wrap gap-1"},ye={class:"relative"},_e={class:"absolute inset-y-0 -left-4 flex items-center"},xe={class:"flex gap-2 text-center"},ke={class:"absolute inset-y-0 -right-4 flex items-center"},Te={class:"my-4 font-semibold"},we={class:"flex-1 overflow-auto no-scrollbar"},Ce={class:"flex flex-wrap gap-1"},Pe={class:"relative"},Le={class:"flex gap-2 text-center"},Qe={__name:"BoxSlot",async setup(e){let n,s;const d={incomestatement:re,balancesheet:ie,cashflow:le},P={incomestatement:["revenue","grossProfit","postTaxProfit"],balancesheet:["asset","capital","equity"],cashflow:["fromSale","fromInvest","freeCashFlow"]},f=_("incomestatement"),H=c=>{f.value=c},p=_(!0),N=c=>{p.value=c},V=se(),E=v(()=>V.symbol),I=v(()=>{var a;const c=((a=B.value)==null?void 0:a.data)||[];return Object.keys(c[0]).filter(r=>r!=="ticker"&&r!=="quarter"&&r!=="year")}),q=v(()=>{var r;const c={};return(((r=B.value)==null?void 0:r.data)||[]).forEach(i=>{const l=i.quarter&&i.quarter<=4?`${i.year} Q${i.quarter}`:i.year;c[l]||(c[l]={}),I.value.forEach(g=>{c[l][g]=i[g]||null})}),c}),A=v(()=>{const c=new Set(y.value),a={};for(const r of c)q.value[r]&&(a[r]=q.value[r]);return a}),L=v(()=>{var r;const a=(((r=B.value)==null?void 0:r.data)||[]).map(i=>i.quarter&&i.quarter<=4?`${i.year} Q${i.quarter}`:i.year);return[...new Set(a)].sort((i,l)=>l-i)}),b=_(0),m=_(4),y=v(()=>L.value.slice(b.value,m.value)),j=()=>{b.value>0&&(b.value-=4,m.value-=4)},z=()=>{m.value<L.value.length&&(b.value+=4,m.value+=4)},F={type:"bar",height:"200px",stroke:"smooth",strokeWidth:1,strokeDashes:0,markers:0,dark:!0,fillSolid:!0},Y=_([]),R=oe({baseURL:Q().API_FINSC}),{data:B,status:U}=([n,s]=te(()=>W("finance",()=>R.get(`/scfa/${E.value}/${f.value}?yearly=${p.value}`),{watch:[E,f,p]})),n=await n,s(),n);return Z(()=>y.value,c=>{Y.value=P[f.value].map(a=>({name:d[f.value][a],data:c.map(r=>A.value[r][a])}))}),(c,a)=>{const r=K,i=X;return u(),h("div",ce,[t("div",ue,[T(r,{scale:.5,pos:"tl"},{default:O(()=>a[2]||(a[2]=[t("div",{class:"mr-10 mb-8 text-xl rotate-[-32deg] font-semibold"},[t("div",{class:"animate-bounce"},"Tài chính")],-1)])),_:1}),t("div",he,[t("div",de,[(u(!0),h(w,null,C(o($),(l,g)=>(u(),h("button",{key:g,onClick:S=>H(l.id),class:D(["rounded-full px-3 py-1 border border-transparent",o(f)===l.id?"bg-base-100":"border-base-neutral"])},x(l.name),11,fe))),128))])])]),o(U)==="success"?(u(),h("div",ge,[t("div",ve,[T(o(ne),J({categories:o(y),series:o(Y)},F),null,16,["categories","series"])]),t("div",pe,[t("div",be,[t("div",me,[t("button",{class:D(["px-3 py-1 rounded-full",{"bg-base-primary":o(p)}]),onClick:a[0]||(a[0]=l=>N(!0))}," Hàng Năm ",2),t("button",{class:D(["px-3 py-1 rounded-full",{"bg-base-primary":!o(p)}]),onClick:a[1]||(a[1]=l=>N(!1))}," Hàng Quý ",2)]),t("div",ye,[t("div",_e,[T(i,{onClick:j,disabled:o(b)===0,icon:"i-ri-arrow-left-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])]),t("div",xe,[(u(!0),h(w,null,C(o(y),l=>(u(),h("div",{key:l,class:"font-semibold w-14"},x(l),1))),128))]),t("div",ke,[T(i,{onClick:z,disabled:o(m)>=o(L).length,icon:"i-ri-arrow-right-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])])])]),t("div",Te,x(o($)[o(f)]),1)]),t("div",we,[(u(!0),h(w,null,C(o(I),(l,g)=>(u(),h("div",{class:"flex justify-between items-center",key:g},[t("div",Ce,x(d[o(f)][l]),1),t("div",Pe,[t("div",Le,[(u(!0),h(w,null,C(o(y),S=>(u(),h("div",{class:"w-14 my-1",key:S},x(o(A)[S][l]||"-"),1))),128))])])]))),128))])])):M("",!0)])}}};export{Qe as default};
