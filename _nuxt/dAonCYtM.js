import{_ as K}from"./esL8_bje.js";import{r as m,bb as M,bd as J,bs as l,bq as c,bw as s,bH as F,bO as Y,br as o,bt as X,bE as O,a_ as p,bV as ee,b3 as te,bx as C,by as G,bA as S,bB as k,bU as P,bC as B,bT as se}from"./BD89yi6W.js";import{u as oe,g as ae,f as re}from"./B3yyU8Ve.js";import ne from"./DKmAdjKY.js";import{f as V,i as le,b as ie,c as ce}from"./CDm2gSvM.js";import{u as ue}from"./BTPa5cjO.js";import{a as de}from"./B_yE16Nh.js";import"./B39OMRwo.js";import"./DxqHYnwt.js";import"./BLVB0qGI.js";import"./DdDBkiWh.js";const fe={class:"flex items-center"},me={__name:"ScrollHorizon",setup(Q){const i=m(null),b=m(!1),h=m(!1),v=()=>{if(i.value){const{scrollLeft:d,scrollWidth:x,clientWidth:_}=i.value;b.value=d>0,h.value=d+_<x}},u=()=>{i.value&&(i.value.scrollBy({left:-200,behavior:"smooth"}),setTimeout(v,300))},q=()=>{i.value&&(i.value.scrollBy({left:200,behavior:"smooth"}),setTimeout(v,300))};return M(()=>{setTimeout(()=>{v()},1200),window.addEventListener("resize",v)}),J(()=>{window.removeEventListener("resize",v)}),(d,x)=>{const _=O;return l(),c("div",fe,[s(b)?(l(),F(_,{key:0,icon:"i-ri-arrow-left-s-line",size:"2xs",color:"gray",square:"",variant:"soft",ui:{rounded:"rounded-full"},onClick:u})):Y("",!0),o("div",{class:"flex gap-2 whitespace-nowrap overflow-x-auto scrollbar-hide",ref_key:"scrollContent",ref:i},[X(d.$slots,"default")],512),s(h)?(l(),F(_,{key:1,icon:"i-ri-arrow-right-s-line",size:"2xs",color:"gray",square:"",variant:"soft",ui:{rounded:"rounded-full"},onClick:q})):Y("",!0)])}}},ve={class:"rounded-finsc overflow-hidden flex flex-col h-full w-full bg-base-300 text-sm"},_e={class:"flex flex-none justify-between"},pe={class:"text-sm h-full flex items-center pr-6 -ml-6 -mt-3 overflow-hidden"},be=["onClick"],he={key:0,class:"px-6 pb-6 flex-1 flex flex-col overflow-auto -mt-6"},xe={class:"flex-none -mx-4"},ye={class:"flex-none"},we={class:"flex justify-between items-center"},ge={class:"flex flex-wrap gap-1 min-w-32"},Ce={class:"relative"},Be={class:"absolute inset-y-0 -left-4 flex items-center"},Se={class:"flex gap-2 text-center"},ke={class:"absolute inset-y-0 -right-4 flex items-center"},qe={class:"my-4 font-semibold"},$e={class:"flex-1"},ze={class:"flex flex-wrap gap-1 min-w-32"},Ae={class:"relative"},Le={class:"flex gap-2 text-center"},Qe={__name:"BoxFinance",async setup(Q){let i,b;const h={incomestatement:le,balancesheet:ie,cashflow:ce},v={incomestatement:["revenue","grossProfit","postTaxProfit"],balancesheet:["asset","capital","equity"],cashflow:["fromSale","fromInvest","freeCashFlow"]},u=m("incomestatement"),q=t=>{u.value=t},d=m(!0),x=t=>{d.value=t},_=oe(),E=p(()=>_.symbol),R=(t,e)=>e==="yearOperationProfitGrowth"||e==="yearRevenueGrowth"||e==="yearShareHolderIncomeGrowth"||e==="quarterOperationProfitGrowth"||e==="quarterRevenueGrowth"||e==="quarterShareHolderIncomeGrowth"?(t*100).toFixed(1)+"%":t,H=p(()=>{var e;const t=((e=z.value)==null?void 0:e.data)||[];return Object.keys(t[0]).filter(a=>a!=="ticker"&&a!=="quarter"&&a!=="year")}),I=p(()=>{var a;const t={};return(((a=z.value)==null?void 0:a.data)||[]).forEach(r=>{const f=r.quarter&&r.quarter<=4?`${r.year} Q${r.quarter}`:r.year;t[f]||(t[f]={}),H.value.forEach(n=>{t[f][n]=r[n]||null})}),t}),N=p(()=>{const t=new Set(g.value),e={};for(const a of t)I.value[a]&&(e[a]=I.value[a]);return e}),$=p(()=>{var a;const e=(((a=z.value)==null?void 0:a.data)||[]).map(r=>r.quarter&&r.quarter<=4?`${r.year} Q${r.quarter}`:r.year);return[...new Set(e)].sort((r,f)=>f-r)}),y=m(0),w=m(4),g=p(()=>$.value.slice(y.value,w.value).sort((t,e)=>{const[a,r]=String(t).split(" Q").map(Number),[f,n]=String(e).split(" Q").map(Number);return a-f||(r||0)-(n||0)})),U=()=>{y.value>0&&(y.value-=4,w.value-=4)},j=()=>{w.value<$.value.length&&(y.value+=4,w.value+=4)},W={type:"bar",height:"200px",stroke:"smooth",strokeWidth:1,strokeDashes:0,markers:0,dark:!0,fillSolid:!0},T=m([]),D=ue({baseURL:de().API_FINSC}),{data:z,status:Z}=([i,b]=ae(()=>ee("finance",()=>D.get(`/scfa/${E.value}/${u.value}?yearly=${d.value}`),{watch:[E,u,d]})),i=await i,b(),i);return te(()=>g.value,t=>{T.value=v[u.value].map(e=>({name:h[u.value][e],data:t.map(a=>N.value[a][e])}))}),(t,e)=>{const a=K,r=me,f=O;return l(),c("div",ve,[o("div",_e,[C(a,{scale:.5,pos:"tl"},{default:G(()=>e[2]||(e[2]=[o("div",{class:"mr-10 mb-8 text-2xl rotate-[-32deg] font-semibold text-base-primary",title:"Báo cáo tài chính"},[o("div",{class:"animate-bounce"},"BCTC")],-1)])),_:1}),o("div",pe,[C(r,{class:"max-w-full"},{default:G(()=>[(l(!0),c(S,null,k(s(V),(n,A)=>(l(),c("button",{key:A,onClick:L=>q(n.id),class:P(["rounded-full px-3 py-1 border border-transparent",s(u)===n.id?"bg-base-100":"border-base-neutral"])},B(n.name),11,be))),128))]),_:1})])]),s(Z)==="success"?(l(),c("div",he,[o("div",xe,[C(s(ne),se({categories:s(g),series:s(T)},W),null,16,["categories","series"])]),o("div",ye,[o("div",we,[o("div",ge,[o("button",{class:P(["px-3 py-1 rounded-full",{"bg-base-primary":s(d)}]),onClick:e[0]||(e[0]=n=>x(!0))}," Hàng Năm ",2),o("button",{class:P(["px-3 py-1 rounded-full",{"bg-base-primary":!s(d)}]),onClick:e[1]||(e[1]=n=>x(!1))}," Hàng Quý ",2)]),o("div",Ce,[o("div",Be,[C(f,{onClick:j,disabled:s(w)>=s($).length,icon:"i-ri-arrow-left-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])]),o("div",Se,[(l(!0),c(S,null,k(s(g),n=>(l(),c("div",{key:n,class:"font-semibold w-14"},B(n),1))),128))]),o("div",ke,[C(f,{onClick:U,disabled:s(y)===0,icon:"i-ri-arrow-right-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])])])]),o("div",qe,B(s(V)[s(u)]),1)]),o("div",$e,[(l(!0),c(S,null,k(s(H),(n,A)=>(l(),c("div",{class:"flex justify-between items-center",key:A},[o("div",ze,B(h[s(u)][n]),1),o("div",Ae,[o("div",Le,[(l(!0),c(S,null,k(s(g),L=>(l(),c("div",{class:"w-14 my-1",key:L},B(s(re)(R(s(N)[L][n],n))),1))),128))])])]))),128))])])):Y("",!0)])}}};export{Qe as default};
