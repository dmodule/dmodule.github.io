import{_ as K}from"./CiXQBoTi.js";import{r as O,bq as q,b4 as X,bp as m,bn as b,bo as t,bv as v,bw as y,bA as i,bu as l,bW as C,by as Y,bz as P,bS as _,bZ as w,ci as T}from"./DJaf_P2z.js";import{g}from"./BdMQyVqi.js";import{u as ee}from"./C2Qq6D40.js";import"./6bUBh_yt.js";import"./pGdLB03n.js";import"./BLVB0qGI.js";import"./DdDBkiWh.js";const te={class:"rounded-finsc overflow-hidden h-full w-full text-base bg-base-300 flex flex-col justify-between"},se={class:"flex-none h-[32px]"},ne={class:"w-full relative flex justify-center"},oe={class:"w-[180px] mx-auto relative"},le={class:"text-base-bg-300 absolute inset-0 origin-top-left",width:"360",height:"48",viewBox:"0 0 360 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(0.5)"}},re={class:"flex text-center gap-4 px-4 py-2"},ie={class:"flex justify-between w-full h-7 mx-2"},ce={class:"overflow-auto flex-1 px-2 mt-2"},ae={class:"overflow-x-auto w-full max-h-screen rounded-lg bg-white/5"},ue={class:"table text-sm text-center table-pin-rows table-pin-cols"},de={colspan:"3"},ge={class:"flex relative text-right"},pe={class:"flex-1 text-left px-2"},xe={class:"text-center px-4 py-2"},he={class:"w-full p-1"},fe={class:"flex justify-between px-2 font-semibold"},me={class:"text-green-500"},be={class:"text-red-600"},ke={__name:"BoxStrength",setup(ve){const k=ee(),R=O(!1),Z=(f={},e={})=>{var z,M,V,D;const{basicPrice:a=0,matchPrice:p=0,matchQtty:d=0}=f,s=Math.max(d*10,...((z=e==null?void 0:e.bid)==null?void 0:z.map(n=>n.qtty*10))||[],...((M=e==null?void 0:e.ask)==null?void 0:M.map(n=>n.qtty*10))||[]),o=(n,u)=>{const S=s?u*10/s*100:0,I=a?((n-a)/a*100).toFixed(1):"0.0",J=n-a;return{changedRatio:I,percentChange:S.toFixed(1),changed:J.toFixed(2)}},x=((V=e==null?void 0:e.bid)==null?void 0:V.map(n=>({price:n.price,qtty:(n.qtty*10).toLocaleString(),...o(n.price,n.qtty)})))||[],h=((D=e==null?void 0:e.ask)==null?void 0:D.map(n=>({price:n.price,qtty:(n.qtty*10).toLocaleString(),...o(n.price,n.qtty)})))||[],L={price:p,qtty:(d*10).toLocaleString(),...o(p,d)},N=[...x,...h].sort((n,u)=>(n==null?void 0:n.price)-(u==null?void 0:u.price));N.splice(3,0,L);const Q=n=>!n||n.length===0?0:n.reduce((u,S)=>u+S.qtty*10,0),F=Q(e==null?void 0:e.ask),B=Q(e==null?void 0:e.bid),c=F+B,G=c?(F/c*100).toFixed(6):"0.0",H=c?(B/c*100).toFixed(6):"0.0",$=f.buyForeignQtty||0,j=f.sellForeignQtty||0,U=c?($/c*100).toFixed(1):"0.0",W=c?(j/c*100).toFixed(1):"0.0";return{bids:x,asks:h,matchData:L,list:N,sumBuy:F,sumSell:B,sumBuyPercentage:G,sumSellPercentage:H,buyForeign:$,sellForeign:j,buyForeignPercentage:U,sellForeignPercentage:W}},A=q(()=>k.dataSI),E=q(()=>k.dataTP),r=q(()=>Z(A.value,E.value));return X(()=>{R.value=!0}),(f,e)=>{var d;const a=K,p=T;return m(),b("div",te,[t("div",se,[t("div",ne,[t("div",oe,[(m(),b("svg",le,e[0]||(e[0]=[t("path",{d:"M357.237 2.82376e-05C398.658 2.82376e-05 -39.9387 -3.52971e-05 2.95743 2.82376e-05C45.8536 9.17724e-05 66.301 48 115.04 48H251.002C304.338 48 315.815 2.82376e-05 357.237 2.82376e-05Z",fill:"currentColor"},null,-1)]))),e[1]||(e[1]=t("div",{class:"bg-base-primary text-white rounded-full relative text-sm text-center px-2 w-24 mx-auto"}," 3 Bước Giá ",-1))])])]),v(p,{mode:"hover",popper:{placement:"left"}},{panel:y(()=>{var s,o;return[t("div",re,[t("div",null,[e[2]||(e[2]=t("div",null,"Tổng mua",-1)),t("div",null,i(l(g)((s=l(r))==null?void 0:s.sumBuy)),1)]),t("div",null,[e[3]||(e[3]=t("div",null,"Tổng bán",-1)),t("div",null,i(l(g)((o=l(r))==null?void 0:o.sumSell)),1)])])]}),default:y(()=>{var s,o;return[t("div",ie,[t("div",{class:"bg-gradient-to-l from-green-400/80 border-green-400 text-center py-1",style:C({width:((s=l(r))==null?void 0:s.sumBuyPercentage)+"%"})},[v(a,{src:"/static/svg/bull.svg",class:"h-5 mx-auto",alt:"Bull"})],4),t("div",{class:"bg-gradient-to-r from-red-400/80 border-red-400 text-center py-1",style:C({width:((o=l(r))==null?void 0:o.sumSellPercentage)+"%"})},[v(a,{src:"/static/svg/bear.svg",class:"h-5 mx-auto",alt:"Bear"})],4)])]}),_:1}),t("div",ce,[t("div",ae,[t("table",ue,[t("tbody",null,[(m(!0),b(Y,null,P((d=l(r))==null?void 0:d.list,(s,o)=>(m(),b("tr",{key:o},[t("td",{class:_({"text-shadow-light":o===3,"text-yellow-500":parseFloat(s.changed)===0,"text-green-500":parseFloat(s.changed)>0,"text-red-600":parseFloat(s.changed)<0})},i(l(g)(s.price)),3),t("td",de,[t("div",ge,[t("div",{class:_(["absolute bottom-0 left-0 h-full w-full rounded",{"bg-gradient-to-r from-yellow-500/30":parseFloat(s.changed)===0,"bg-gradient-to-r from-green-400/30":parseFloat(s.changed)>0,"bg-gradient-to-r from-red-400/30":parseFloat(s.changed)<0}]),style:C({"max-width":s.percentChange+"%"})},null,6),t("div",pe,i(l(g)(s.qtty)),1),t("div",{class:_(["flex-none w-10 pr-2",{"text-yellow-500":parseFloat(s.changed)===0,"text-green-500":parseFloat(s.changed)>0,"text-red-600":parseFloat(s.changed)<0}])},i(s.changed),3),t("div",{class:_(["flex-none w-10 pr-2 font-semibold",{"text-shadow-light":o===3,"text-yellow-500":parseFloat(s.changed)===0,"text-green-500":parseFloat(s.changed)>0,"text-red-600":parseFloat(s.changed)<0}])},i(s.changedRatio)+"% ",3)])])]))),128))])])])]),v(p,{mode:"hover",popper:{placement:"left"}},{panel:y(()=>{var s,o,x,h;return[t("div",xe,[e[4]||(e[4]=w(" Nước ngoài mua : Nước ngoài bán ")),t("div",null,i(`${l(g)((s=l(r))==null?void 0:s.buyForeign)} (${(o=l(r))==null?void 0:o.buyForeignPercentage}%) : ${l(g)((x=l(r))==null?void 0:x.sellForeign)} (${(h=l(r))==null?void 0:h.sellForeignPercentage}%)`),1),e[5]||(e[5]=t("div",null,"- - - - - -",-1)),e[6]||(e[6]=w(" Phần trăm biểu thị tỷ lệ mua bán của khối ngoại ")),e[7]||(e[7]=t("div",null,"(tính cả thỏa thuận) trên tổng khối lượng khớp.",-1))])]}),default:y(()=>{var s,o;return[t("div",he,[t("div",fe,[t("div",null,[e[8]||(e[8]=w(" Mua ")),t("span",me,i((s=l(r))==null?void 0:s.buyForeignPercentage)+"%",1)]),t("div",null,[t("span",be,i((o=l(r))==null?void 0:o.sellForeignPercentage)+"%",1),e[9]||(e[9]=w(" Bán "))])])])]}),_:1})])}}};export{ke as default};
