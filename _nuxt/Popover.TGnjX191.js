import{aL as we,g as K,r as k,k as C,a9 as de,aa as Q,ap as T,F as X,h as _,a5 as ce,ab as x,_ as $e,ac as ke,ad as le,af as Ce,W as ne,au as Ee,S as re,ah as V,o as N,s as ue,w as H,b as U,y as A,A as se,a as ie,aj as pe,V as W,c as q,z,U as Oe}from"./entry.RTXGjyIc.js";import{u as Be}from"./usePopper.0Y1MULI5.js";import{o as n,u as D,H as ee,t as j,N as ve,a as I}from"./dom.GQGQtvgG.js";import{m as oe,E as te,w as Fe,h as Te,P as M,N as B,T as Y}from"./focus-management.mrAqvuDT.js";import{c as Ie,l as G,p as Me}from"./open-closed.cvjhl3UA.js";import{b as De}from"./use-resolve-button-type.KK7Tmug1.js";import{y as Ne}from"./use-outside-click.HF00DTN-.js";import{V as He,p as Ae,E as je,n as fe,d as F}from"./use-root-containers.JJMlV4Mo.js";import{f as Z,a as J}from"./hidden.IeEwimOK.js";const Le={wrapper:"relative",container:"z-50 group",trigger:"inline-flex w-full",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},overlay:{base:"fixed inset-0 transition-opacity z-50",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enterActiveClass:"ease-out duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in duration-150",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"}},popper:{strategy:"fixed"},arrow:we};var Re=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Re||{});let ge=Symbol("PopoverContext");function ae(e){let S=x(ge,null);if(S===null){let h=new Error(`<${e} /> is missing a parent <${ye.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(h,ae),h}return S}let ze=Symbol("PopoverGroupContext");function me(){return x(ze,null)}let be=Symbol("PopoverPanelContext");function Ge(){return x(be,null)}let ye=K({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:S,attrs:h,expose:E}){var t;let o=k(null);E({el:o,$el:o});let b=k(1),g=k(null),c=k(null),f=k(null),i=k(null),w=C(()=>oe(o)),O=C(()=>{var l,u;if(!n(g)||!n(i))return!1;for(let R of document.querySelectorAll("body > *"))if(Number(R==null?void 0:R.contains(n(g)))^Number(R==null?void 0:R.contains(n(i))))return!0;let d=te(),$=d.indexOf(n(g)),L=($+d.length-1)%d.length,Pe=($+1)%d.length,Se=d[L],he=d[Pe];return!((l=n(i))!=null&&l.contains(Se))&&!((u=n(i))!=null&&u.contains(he))}),y={popoverState:b,buttonId:k(null),panelId:k(null),panel:i,button:g,isPortalled:O,beforePanelSentinel:c,afterPanelSentinel:f,togglePopover(){b.value=D(b.value,{0:1,1:0})},closePopover(){b.value!==1&&(b.value=1)},close(l){y.closePopover();let u=l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?n(l):n(y.button):n(y.button);u==null||u.focus()}};de(ge,y),Ie(C(()=>D(b.value,{0:G.Open,1:G.Closed})));let P={buttonId:y.buttonId,panelId:y.panelId,close(){y.closePopover()}},p=me(),r=p==null?void 0:p.registerPopover,[v,s]=He(),a=Ae({mainTreeNodeRef:p==null?void 0:p.mainTreeNodeRef,portals:v,defaultContainers:[g,i]});function m(){var l,u,d,$;return($=p==null?void 0:p.isFocusWithinPopoverGroup())!=null?$:((l=w.value)==null?void 0:l.activeElement)&&(((u=n(g))==null?void 0:u.contains(w.value.activeElement))||((d=n(i))==null?void 0:d.contains(w.value.activeElement)))}return Q(()=>r==null?void 0:r(P)),je((t=w.value)==null?void 0:t.defaultView,"focus",l=>{var u,d;l.target!==window&&l.target instanceof HTMLElement&&b.value===0&&(m()||g&&i&&(a.contains(l.target)||(u=n(y.beforePanelSentinel))!=null&&u.contains(l.target)||(d=n(y.afterPanelSentinel))!=null&&d.contains(l.target)||y.closePopover()))},!0),Ne(a.resolveContainers,(l,u)=>{var d;y.closePopover(),Fe(u,Te.Loose)||(l.preventDefault(),(d=n(g))==null||d.focus())},C(()=>b.value===0)),()=>{let l={open:b.value===0,close:y.close};return T(X,[T(s,{},()=>ee({theirProps:{...e,...h},ourProps:{ref:o},slot:l,slots:S,attrs:h,name:"Popover"})),T(a.MainTreeNode)])}}}),Ke=K({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${j()}`}},inheritAttrs:!1,setup(e,{attrs:S,slots:h,expose:E}){let t=ae("PopoverButton"),o=C(()=>oe(t.button));E({el:t.button,$el:t.button}),_(()=>{t.buttonId.value=e.id}),ce(()=>{t.buttonId.value=null});let b=me(),g=b==null?void 0:b.closeOthers,c=Ge(),f=C(()=>c===null?!1:c.value===t.panelId.value),i=k(null),w=`headlessui-focus-sentinel-${j()}`;f.value||Q(()=>{t.button.value=i.value});let O=De(C(()=>({as:e.as,type:S.type})),i);function y(a){var m,l,u,d,$;if(f.value){if(t.popoverState.value===1)return;switch(a.key){case I.Space:case I.Enter:a.preventDefault(),(l=(m=a.target).click)==null||l.call(m),t.closePopover(),(u=n(t.button))==null||u.focus();break}}else switch(a.key){case I.Space:case I.Enter:a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(g==null||g(t.buttonId.value)),t.togglePopover();break;case I.Escape:if(t.popoverState.value!==0)return g==null?void 0:g(t.buttonId.value);if(!n(t.button)||(d=o.value)!=null&&d.activeElement&&!(($=n(t.button))!=null&&$.contains(o.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),t.closePopover();break}}function P(a){f.value||a.key===I.Space&&a.preventDefault()}function p(a){var m,l;e.disabled||(f.value?(t.closePopover(),(m=n(t.button))==null||m.focus()):(a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(g==null||g(t.buttonId.value)),t.togglePopover(),(l=n(t.button))==null||l.focus()))}function r(a){a.preventDefault(),a.stopPropagation()}let v=fe();function s(){let a=n(t.panel);if(!a)return;function m(){D(v.value,{[F.Forwards]:()=>M(a,B.First),[F.Backwards]:()=>M(a,B.Last)})===Y.Error&&M(te().filter(l=>l.dataset.headlessuiFocusGuard!=="true"),D(v.value,{[F.Forwards]:B.Next,[F.Backwards]:B.Previous}),{relativeTo:n(t.button)})}m()}return()=>{let a=t.popoverState.value===0,m={open:a},{id:l,...u}=e,d=f.value?{ref:i,type:O.value,onKeydown:y,onClick:p}:{ref:i,id:l,type:O.value,"aria-expanded":t.popoverState.value===0,"aria-controls":n(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:y,onKeyup:P,onClick:p,onMousedown:r};return T(X,[ee({ourProps:d,theirProps:{...S,...u},slot:m,attrs:S,slots:h,name:"PopoverButton"}),a&&!f.value&&t.isPortalled.value&&T(Z,{id:w,features:J.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:s})])}}}),Ve=K({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${j()}`}},inheritAttrs:!1,setup(e,{attrs:S,slots:h,expose:E}){let{focus:t}=e,o=ae("PopoverPanel"),b=C(()=>oe(o.panel)),g=`headlessui-focus-sentinel-before-${j()}`,c=`headlessui-focus-sentinel-after-${j()}`;E({el:o.panel,$el:o.panel}),_(()=>{o.panelId.value=e.id}),ce(()=>{o.panelId.value=null}),de(be,o.panelId),Q(()=>{var r,v;if(!t||o.popoverState.value!==0||!o.panel)return;let s=(r=b.value)==null?void 0:r.activeElement;(v=n(o.panel))!=null&&v.contains(s)||M(n(o.panel),B.First)});let f=Me(),i=C(()=>f!==null?(f.value&G.Open)===G.Open:o.popoverState.value===0);function w(r){var v,s;switch(r.key){case I.Escape:if(o.popoverState.value!==0||!n(o.panel)||b.value&&!((v=n(o.panel))!=null&&v.contains(b.value.activeElement)))return;r.preventDefault(),r.stopPropagation(),o.closePopover(),(s=n(o.button))==null||s.focus();break}}function O(r){var v,s,a,m,l;let u=r.relatedTarget;u&&n(o.panel)&&((v=n(o.panel))!=null&&v.contains(u)||(o.closePopover(),((a=(s=n(o.beforePanelSentinel))==null?void 0:s.contains)!=null&&a.call(s,u)||(l=(m=n(o.afterPanelSentinel))==null?void 0:m.contains)!=null&&l.call(m,u))&&u.focus({preventScroll:!0})))}let y=fe();function P(){let r=n(o.panel);if(!r)return;function v(){D(y.value,{[F.Forwards]:()=>{var s;M(r,B.First)===Y.Error&&((s=n(o.afterPanelSentinel))==null||s.focus())},[F.Backwards]:()=>{var s;(s=n(o.button))==null||s.focus({preventScroll:!0})}})}v()}function p(){let r=n(o.panel);if(!r)return;function v(){D(y.value,{[F.Forwards]:()=>{let s=n(o.button),a=n(o.panel);if(!s)return;let m=te(),l=m.indexOf(s),u=m.slice(0,l+1),d=[...m.slice(l+1),...u];for(let $ of d.slice())if($.dataset.headlessuiFocusGuard==="true"||a!=null&&a.contains($)){let L=d.indexOf($);L!==-1&&d.splice(L,1)}M(d,B.First,{sorted:!1})},[F.Backwards]:()=>{var s;M(r,B.Previous)===Y.Error&&((s=n(o.button))==null||s.focus())}})}v()}return()=>{let r={open:o.popoverState.value===0,close:o.close},{id:v,focus:s,...a}=e,m={ref:o.panel,id:v,onKeydown:w,onFocusout:t&&o.popoverState.value===0?O:void 0,tabIndex:-1};return ee({ourProps:m,theirProps:{...S,...a},attrs:S,slot:r,slots:{...h,default:(...l)=>{var u;return[T(X,[i.value&&o.isPortalled.value&&T(Z,{id:g,ref:o.beforePanelSentinel,features:J.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:P}),(u=h.default)==null?void 0:u.call(h,...l),i.value&&o.isPortalled.value&&T(Z,{id:c,ref:o.afterPanelSentinel,features:J.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:p})])]}},features:ve.RenderStrategy|ve.Static,visible:i.value,name:"PopoverPanel"})}}});const Ue=ke(le.ui.strategy,le.ui.popover,Le),We=K({components:{HPopover:ye,HPopoverButton:Ke,HPopoverPanel:Ve},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},overlay:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:S}){const{ui:h,attrs:E}=Ce("popover",ne(e,"ui"),Ue,ne(e,"class")),t=C(()=>Ee(e.mode==="hover"?{offsetDistance:0}:{},e.popper,h.value.popper)),[o,b]=Be(t.value),g=k(null),c=k(null);let f=null,i=null;_(()=>{var r,v;const P=(r=g.value)==null?void 0:r.$.provides;if(!P)return;const p=Object.getOwnPropertySymbols(P);c.value=p.length&&P[p[0]],e.open&&((v=c.value)==null||v.togglePopover())});const w=C(()=>{var v,s,a;if(e.mode!=="hover")return{};const P=((v=e.popper)==null?void 0:v.offsetDistance)||((s=h.value.popper)==null?void 0:s.offsetDistance)||8,p=(a=t.value.placement)==null?void 0:a.split("-")[0],r=`${P}px`;return p==="top"||p==="bottom"?{paddingTop:r,paddingBottom:r}:p==="left"||p==="right"?{paddingLeft:r,paddingRight:r}:{paddingTop:r,paddingBottom:r,paddingLeft:r,paddingRight:r}});function O(){e.mode!=="hover"||!c.value||(i&&(clearTimeout(i),i=null),c.value.popoverState!==0&&(f=f||setTimeout(()=>{c.value.togglePopover&&c.value.togglePopover(),f=null},e.openDelay)))}function y(){e.mode!=="hover"||!c.value||(f&&(clearTimeout(f),f=null),c.value.popoverState!==1&&(i=i||setTimeout(()=>{c.value.closePopover&&c.value.closePopover(),i=null},e.closeDelay)))}return re(()=>e.open,(P,p)=>{c.value&&(p===void 0||P===p||(P?c.value.popoverState=0:c.value.closePopover()))}),re(()=>{var P;return(P=c.value)==null?void 0:P.popoverState},(P,p)=>{p===void 0||P===p||S("update:open",P===0)}),{ui:h,attrs:E,popover:g,popper:t,trigger:o,container:b,containerStyle:w,onMouseOver:O,onMouseLeave:y}}}),qe=["disabled"];function Ye(e,S,h,E,t,o){const b=V("HPopoverButton"),g=V("HPopoverPanel"),c=V("HPopover");return N(),ue(c,W({ref:"popover",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:H(({open:f,close:i})=>[U(b,{ref:"trigger",as:"div",disabled:e.disabled,class:A(e.ui.trigger),role:"button",onMouseover:e.onMouseOver},{default:H(()=>[se(e.$slots,"default",{open:f,close:i},()=>[ie("button",{disabled:e.disabled}," Open ",8,qe)])]),_:2},1032,["disabled","class","onMouseover"]),e.overlay?(N(),ue(pe,W({key:0,appear:""},e.ui.overlay.transition),{default:H(()=>[f?(N(),q("div",{key:0,class:A([e.ui.overlay.base,e.ui.overlay.background])},null,2)):z("",!0)]),_:2},1040)):z("",!0),f?(N(),q("div",{key:1,ref:"container",class:A([e.ui.container,e.ui.width]),style:Oe(e.containerStyle),onMouseover:S[0]||(S[0]=(...w)=>e.onMouseOver&&e.onMouseOver(...w))},[U(pe,W({appear:""},e.ui.transition),{default:H(()=>[ie("div",null,[e.popper.arrow?(N(),q("div",{key:0,"data-popper-arrow":"",class:A(Object.values(e.ui.arrow))},null,2)):z("",!0),U(g,{class:A([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:H(()=>[se(e.$slots,"panel",{open:f,close:i})]),_:2},1032,["class"])])]),_:2},1040)],38)):z("",!0)]),_:3},16,["class","onMouseleave"])}const ao=$e(We,[["render",Ye]]);export{ao as default};
