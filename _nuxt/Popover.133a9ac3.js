import{cg as he,g as G,r as k,U as C,aP as ve,bv as J,ai as T,F as X,aI as x,aN as de,ao as _,_ as we,bN as $e,bO as le,bQ as ke,ba as ne,bZ as Ce,x as K,o as D,l as re,w as H,b as U,v as ue,a as se,H as ie,y as q,c as W,q as V,s as z,aB as Ee}from"./entry.dd57515c.js";import{u as Be}from"./usePopper.131299e2.js";import{o as l,u as N,H as ee,t as A,N as pe,a as I}from"./dom.4fbabe05.js";import{m as oe,E as te,w as Fe,h as Oe,P as M,N as F,T as Z}from"./focus-management.d1b67802.js";import{c as Te,l as R,p as Ie}from"./open-closed.43a4452f.js";import{b as Me}from"./use-resolve-button-type.77b84eb6.js";import{y as Ne}from"./use-outside-click.5f24c618.js";import{V as De,p as He,E as Ae,n as ce,d as O}from"./use-root-containers.2304d2f9.js";import{f as Q,a as Y}from"./hidden.324ae6c0.js";const je={wrapper:"relative",container:"z-50 group",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},overlay:{base:"fixed inset-0 transition-opacity z-50",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enterActiveClass:"ease-out duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in duration-150",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"}},popper:{strategy:"fixed"},arrow:he};var Le=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Le||{});let fe=Symbol("PopoverContext");function ae(e){let m=_(fe,null);if(m===null){let S=new Error(`<${e} /> is missing a parent <${ge.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(S,ae),S}return m}let Ve=Symbol("PopoverGroupContext");function be(){return _(Ve,null)}let me=Symbol("PopoverPanelContext");function ze(){return _(me,null)}let ge=G({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:m,attrs:S,expose:E}){var t;let o=k(null);E({el:o,$el:o});let f=k(1),r=k(null),P=k(null),v=k(null),c=k(null),h=C(()=>oe(o)),B=C(()=>{var a,u;if(!l(r)||!l(c))return!1;for(let L of document.querySelectorAll("body > *"))if(Number(L==null?void 0:L.contains(l(r)))^Number(L==null?void 0:L.contains(l(c))))return!0;let i=te(),$=i.indexOf(l(r)),j=($+i.length-1)%i.length,ye=($+1)%i.length,Pe=i[j],Se=i[ye];return!((a=l(c))!=null&&a.contains(Pe))&&!((u=l(c))!=null&&u.contains(Se))}),d={popoverState:f,buttonId:k(null),panelId:k(null),panel:c,button:r,isPortalled:B,beforePanelSentinel:P,afterPanelSentinel:v,togglePopover(){f.value=N(f.value,{0:1,1:0})},closePopover(){f.value!==1&&(f.value=1)},close(a){d.closePopover();let u=(()=>a?a instanceof HTMLElement?a:a.value instanceof HTMLElement?l(a):l(d.button):l(d.button))();u==null||u.focus()}};ve(fe,d),Te(C(()=>N(f.value,{0:R.Open,1:R.Closed})));let w={buttonId:d.buttonId,panelId:d.panelId,close(){d.closePopover()}},y=be(),p=y==null?void 0:y.registerPopover,[g,s]=De(),n=He({mainTreeNodeRef:y==null?void 0:y.mainTreeNodeRef,portals:g,defaultContainers:[r,c]});function b(){var a,u,i,$;return($=y==null?void 0:y.isFocusWithinPopoverGroup())!=null?$:((a=h.value)==null?void 0:a.activeElement)&&(((u=l(r))==null?void 0:u.contains(h.value.activeElement))||((i=l(c))==null?void 0:i.contains(h.value.activeElement)))}return J(()=>p==null?void 0:p(w)),Ae((t=h.value)==null?void 0:t.defaultView,"focus",a=>{var u,i;a.target!==window&&a.target instanceof HTMLElement&&f.value===0&&(b()||r&&c&&(n.contains(a.target)||(u=l(d.beforePanelSentinel))!=null&&u.contains(a.target)||(i=l(d.afterPanelSentinel))!=null&&i.contains(a.target)||d.closePopover()))},!0),Ne(n.resolveContainers,(a,u)=>{var i;d.closePopover(),Fe(u,Oe.Loose)||(a.preventDefault(),(i=l(r))==null||i.focus())},C(()=>f.value===0)),()=>{let a={open:f.value===0,close:d.close};return T(X,[T(s,{},()=>ee({theirProps:{...e,...S},ourProps:{ref:o},slot:a,slots:m,attrs:S,name:"Popover"})),T(n.MainTreeNode)])}}}),Re=G({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${A()}`}},inheritAttrs:!1,setup(e,{attrs:m,slots:S,expose:E}){let t=ae("PopoverButton"),o=C(()=>oe(t.button));E({el:t.button,$el:t.button}),x(()=>{t.buttonId.value=e.id}),de(()=>{t.buttonId.value=null});let f=be(),r=f==null?void 0:f.closeOthers,P=ze(),v=C(()=>P===null?!1:P.value===t.panelId.value),c=k(null),h=`headlessui-focus-sentinel-${A()}`;v.value||J(()=>{t.button.value=c.value});let B=Me(C(()=>({as:e.as,type:m.type})),c);function d(n){var b,a,u,i,$;if(v.value){if(t.popoverState.value===1)return;switch(n.key){case I.Space:case I.Enter:n.preventDefault(),(a=(b=n.target).click)==null||a.call(b),t.closePopover(),(u=l(t.button))==null||u.focus();break}}else switch(n.key){case I.Space:case I.Enter:n.preventDefault(),n.stopPropagation(),t.popoverState.value===1&&(r==null||r(t.buttonId.value)),t.togglePopover();break;case I.Escape:if(t.popoverState.value!==0)return r==null?void 0:r(t.buttonId.value);if(!l(t.button)||(i=o.value)!=null&&i.activeElement&&!(($=l(t.button))!=null&&$.contains(o.value.activeElement)))return;n.preventDefault(),n.stopPropagation(),t.closePopover();break}}function w(n){v.value||n.key===I.Space&&n.preventDefault()}function y(n){var b,a;e.disabled||(v.value?(t.closePopover(),(b=l(t.button))==null||b.focus()):(n.preventDefault(),n.stopPropagation(),t.popoverState.value===1&&(r==null||r(t.buttonId.value)),t.togglePopover(),(a=l(t.button))==null||a.focus()))}function p(n){n.preventDefault(),n.stopPropagation()}let g=ce();function s(){let n=l(t.panel);if(!n)return;function b(){N(g.value,{[O.Forwards]:()=>M(n,F.First),[O.Backwards]:()=>M(n,F.Last)})===Z.Error&&M(te().filter(a=>a.dataset.headlessuiFocusGuard!=="true"),N(g.value,{[O.Forwards]:F.Next,[O.Backwards]:F.Previous}),{relativeTo:l(t.button)})}b()}return()=>{let n=t.popoverState.value===0,b={open:n},{id:a,...u}=e,i=v.value?{ref:c,type:B.value,onKeydown:d,onClick:y}:{ref:c,id:a,type:B.value,"aria-expanded":t.popoverState.value===0,"aria-controls":l(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:d,onKeyup:w,onClick:y,onMousedown:p};return T(X,[ee({ourProps:i,theirProps:{...m,...u},slot:b,attrs:m,slots:S,name:"PopoverButton"}),n&&!v.value&&t.isPortalled.value&&T(Q,{id:h,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:s})])}}}),Ge=G({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${A()}`}},inheritAttrs:!1,setup(e,{attrs:m,slots:S,expose:E}){let{focus:t}=e,o=ae("PopoverPanel"),f=C(()=>oe(o.panel)),r=`headlessui-focus-sentinel-before-${A()}`,P=`headlessui-focus-sentinel-after-${A()}`;E({el:o.panel,$el:o.panel}),x(()=>{o.panelId.value=e.id}),de(()=>{o.panelId.value=null}),ve(me,o.panelId),J(()=>{var p,g;if(!t||o.popoverState.value!==0||!o.panel)return;let s=(p=f.value)==null?void 0:p.activeElement;(g=l(o.panel))!=null&&g.contains(s)||M(l(o.panel),F.First)});let v=Ie(),c=C(()=>v!==null?(v.value&R.Open)===R.Open:o.popoverState.value===0);function h(p){var g,s;switch(p.key){case I.Escape:if(o.popoverState.value!==0||!l(o.panel)||f.value&&!((g=l(o.panel))!=null&&g.contains(f.value.activeElement)))return;p.preventDefault(),p.stopPropagation(),o.closePopover(),(s=l(o.button))==null||s.focus();break}}function B(p){var g,s,n,b,a;let u=p.relatedTarget;u&&l(o.panel)&&((g=l(o.panel))!=null&&g.contains(u)||(o.closePopover(),((n=(s=l(o.beforePanelSentinel))==null?void 0:s.contains)!=null&&n.call(s,u)||(a=(b=l(o.afterPanelSentinel))==null?void 0:b.contains)!=null&&a.call(b,u))&&u.focus({preventScroll:!0})))}let d=ce();function w(){let p=l(o.panel);if(!p)return;function g(){N(d.value,{[O.Forwards]:()=>{var s;M(p,F.First)===Z.Error&&((s=l(o.afterPanelSentinel))==null||s.focus())},[O.Backwards]:()=>{var s;(s=l(o.button))==null||s.focus({preventScroll:!0})}})}g()}function y(){let p=l(o.panel);if(!p)return;function g(){N(d.value,{[O.Forwards]:()=>{let s=l(o.button),n=l(o.panel);if(!s)return;let b=te(),a=b.indexOf(s),u=b.slice(0,a+1),i=[...b.slice(a+1),...u];for(let $ of i.slice())if($.dataset.headlessuiFocusGuard==="true"||n!=null&&n.contains($)){let j=i.indexOf($);j!==-1&&i.splice(j,1)}M(i,F.First,{sorted:!1})},[O.Backwards]:()=>{var s;M(p,F.Previous)===Z.Error&&((s=l(o.button))==null||s.focus())}})}g()}return()=>{let p={open:o.popoverState.value===0,close:o.close},{id:g,focus:s,...n}=e,b={ref:o.panel,id:g,onKeydown:h,onFocusout:t&&o.popoverState.value===0?B:void 0,tabIndex:-1};return ee({ourProps:b,theirProps:{...m,...n},attrs:m,slot:p,slots:{...S,default:(...a)=>{var u;return[T(X,[c.value&&o.isPortalled.value&&T(Q,{id:r,ref:o.beforePanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:w}),(u=S.default)==null?void 0:u.call(S,...a),c.value&&o.isPortalled.value&&T(Q,{id:P,ref:o.afterPanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:y})])]}},features:pe.RenderStrategy|pe.Static,visible:c.value,name:"PopoverPanel"})}}});const Ke=$e(le.ui.strategy,le.ui.popover,je),Ue=G({components:{HPopover:ge,HPopoverButton:Re,HPopoverPanel:Ge},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},overlay:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},emits:["update:open"],setup(e){const{ui:m,attrs:S}=ke("popover",ne(e,"ui"),Ke,ne(e,"class")),E=C(()=>Ce(e.mode==="hover"?{offsetDistance:0}:{},e.popper,m.value.popper)),[t,o]=Be(E.value),f=k(null),r=k(null);let P=null,v=null;x(()=>{var y;const d=(y=f.value)==null?void 0:y.$.provides;if(!d)return;const w=Object.getOwnPropertySymbols(d);r.value=w.length&&d[w[0]]});const c=C(()=>{var y,p;const w=`${((y=e.popper)==null?void 0:y.offsetDistance)||((p=m.value.popper)==null?void 0:p.offsetDistance)||8}px`;return e.mode==="hover"?{paddingTop:w,paddingBottom:w,paddingLeft:w,paddingRight:w}:{}});function h(){e.mode!=="hover"||!r.value||(v&&(clearTimeout(v),v=null),r.value.popoverState!==0&&(P=P||setTimeout(()=>{r.value.togglePopover&&r.value.togglePopover(),P=null},e.openDelay)))}function B(){e.mode!=="hover"||!r.value||(P&&(clearTimeout(P),P=null),r.value.popoverState!==1&&(v=v||setTimeout(()=>{r.value.closePopover&&r.value.closePopover(),v=null},e.closeDelay)))}return{ui:m,attrs:S,popover:f,popper:E,trigger:t,container:o,containerStyle:c,onMouseOver:h,onMouseLeave:B}}}),qe=["disabled"];function We(e,m,S,E,t,o){const f=K("HPopoverButton"),r=K("HPopoverPanel"),P=K("HPopover");return D(),re(P,q({ref:"popover",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:H(({open:v,close:c})=>[U(f,{ref:"trigger",as:"div",disabled:e.disabled,class:"inline-flex w-full",role:"button",onMouseover:e.onMouseOver},{default:H(()=>[ue(e.$slots,"default",{open:e.open!==void 0?e.open:v,close:c},()=>[se("button",{disabled:e.disabled}," Open ",8,qe)])]),_:2},1032,["disabled","onMouseover"]),e.overlay?(D(),re(ie,q({key:0,appear:""},e.ui.overlay.transition),{default:H(()=>[(e.open!==void 0?e.open:v)?(D(),W("div",{key:0,class:V([e.ui.overlay.base,e.ui.overlay.background]),onClick:m[0]||(m[0]=h=>e.$emit("update:open"))},null,2)):z("",!0)]),_:2},1040)):z("",!0),(e.open!==void 0?e.open:v)?(D(),W("div",{key:1,ref:"container",class:V([e.ui.container,e.ui.width]),style:Ee(e.containerStyle),onMouseover:m[1]||(m[1]=(...h)=>e.onMouseOver&&e.onMouseOver(...h))},[U(ie,q({appear:""},e.ui.transition),{default:H(()=>[se("div",null,[e.popper.arrow?(D(),W("div",{key:0,"data-popper-arrow":"",class:V(["invisible before:visible before:block before:rotate-45 before:z-[-1]",Object.values(e.ui.arrow)])},null,2)):z("",!0),U(r,{class:V([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:H(()=>[ue(e.$slots,"panel",{open:e.open!==void 0?e.open:v,close:c})]),_:2},1032,["class"])])]),_:2},1040)],38)):z("",!0)]),_:3},16,["class","onMouseleave"])}const to=we(Ue,[["render",We]]);export{to as default};
