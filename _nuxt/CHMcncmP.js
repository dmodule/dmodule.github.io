import{r as T,a_ as m,bX as z,bb as A,bx as s,bs as i,bq as d,br as e,bP as _,bD as u,by as M,bz as w,bI as F,bV as N,bB as R,bC as j,bW as b,bQ as H,b_ as K}from"./B2zngJ72.js";import{u as Q}from"./-Pa_sf8E.js";import{w as U}from"./CJ2HXv4E.js";import E from"./Cr9UJJ4t.js";import{b as W,h as Y,j as g,f as S}from"./CEPNV0NR.js";import{u as Z}from"./CpHGb9j-.js";import{a as q}from"./2DHyWFFj.js";import{s as G}from"./CXaQVNdb.js";import"./DdDBkiWh.js";import"./DH-5LqSd.js";import"./DxqHYnwt.js";import"./BLVB0qGI.js";const X={key:0,class:"rounded-finsc overflow-hidden h-full w-full text-base bg-base-300 flex flex-col"},$={key:0,class:"flex-none h-[32px]"},J={class:"w-full relative flex justify-center"},O={class:"w-[180px] mx-auto relative"},ee={class:"text-base-bg-300 absolute inset-0 origin-top-left",width:"360",height:"48",viewBox:"0 0 360 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(0.5)"}},te={class:"flex justify-between text-xs -mt-6 px-4 pb-2"},se={class:"p-2 -mt-2"},oe={class:"overflow-x-auto w-full pb-32 max-h-screen rounded-lg bg-white/5"},ae={class:"table text-sm text-center table-pin-rows table-pin-cols"},le={colspan:"3"},re={class:"flex relative"},ne={class:"flex-1"},ie={class:"w-80 h-[500px]"},ge={__name:"BoxVolumn",props:{symbol:{type:String,default:""}},async setup(k){let c,f;const h=k,p=T(1),x=m(()=>h.symbol||W().symbol),y=m(()=>{var o;return(((o=n.value)==null?void 0:o.historyIntra)||[]).toReversed()}),B=m(()=>{var o;return(o=n.value)==null?void 0:o.historyIntra.reduce((a,r)=>a+r.Price*r.Volume,0)}),D=m(()=>{var o,a,r;return(r=(a=n.value)==null?void 0:a.historyIntra[((o=n.value)==null?void 0:o.historyIntra.length)-1])==null?void 0:r.TotalVolume}),C={colors:["#34c85e","#d73834","#ff7602"],type:"bar",height:"100%",horizontal:!0,stacked:!0,stroke:"smooth",strokeWidth:1,strokeDashes:0,markers:0,dark:!0,fillSolid:!0,animation:!1},V=Z({baseURL:q().API_URI}),{data:n,status:ue}=([c,f]=U(()=>z("intraday",()=>V.get(`IntradayQuotes?symbol=${x.value}`),{watch:[x,p]})),c=await c,f(),c),v=(o,a,r,t)=>{const l=new Date,L=new Date(l.getFullYear(),l.getMonth(),l.getDate(),o,a),P=new Date(l.getFullYear(),l.getMonth(),l.getDate(),r,t);return l>=L&&l<=P},I=()=>v(9,0,11,30)||v(13,0,15,0);return A(()=>{G(()=>{I()&&p.value++},5*1e3)}),(o,a)=>{const r=K;return s(Y)(s(y))?(i(),d("div",X,[h.symbol?_("",!0):(i(),d("div",$,[e("div",J,[e("div",O,[(i(),d("svg",ee,a[0]||(a[0]=[e("path",{d:"M357.237 2.82376e-05C398.658 2.82376e-05 -39.9387 -3.52971e-05 2.95743 2.82376e-05C45.8536 9.17724e-05 66.301 48 115.04 48H251.002C304.338 48 315.815 2.82376e-05 357.237 2.82376e-05Z",fill:"currentColor"},null,-1)]))),a[1]||(a[1]=e("div",{class:"bg-base-primary text-white rounded-full relative text-sm text-center px-2 w-24 mx-auto"}," Khớp lệnh ",-1))])])])),e("div",te,[e("div",null,[e("div",null,u(s(g)(s(D)))+" cổ",1)]),e("div",null,[e("div",null,u(s(g)(s(B),!0)),1)])]),e("div",se,[M(r,{mode:"hover",popper:{placement:"left-start"}},{panel:w(()=>[e("div",ie,[(i(),F(s(E),N({key:s(p),categories:s(n).accumulatedVolumes.categories,series:s(n).accumulatedVolumes.series},C),null,16,["categories","series"]))])]),default:w(()=>[e("div",oe,[e("table",ae,[a[2]||(a[2]=e("thead",null,[e("tr",{class:"text-xs bg-base-primary"},[e("th",{class:"py-1 w-20"},"Thời gian"),e("th",{class:"py-1 w-20"},"Giá"),e("th",{class:"py-1"},"KL"),e("th",{class:"py-1 w-10"},"Lệnh")])],-1)),e("tbody",null,[(i(!0),d(R,null,j(s(y),(t,l)=>(i(),d("tr",{key:l},[e("td",null,u(("useDate"in o?o.useDate:s(Q))(t.Date,"HH:mm:ss")),1),e("td",le,[e("div",re,[e("div",{class:b(["absolute bottom-0 left-0 h-full w-full rounded",{"bg-gradient-to-r from-green-400/20":t.Side==="B","bg-gradient-to-r from-red-400/20":t.Side==="S"}]),style:H({"max-width":t.percentQuantity+"%"})},null,6),e("div",{class:b(["flex-none w-20",{"text-yellow-600":t.Side===null,"text-green-600":t.Side==="B","text-red-600":t.Side==="S"}])},u(s(S)(t.Price)),3),e("div",ne,u(s(S)(t.Volume)),1),e("div",{class:b(["flex-none w-10 font-semibold",{"text-yellow-600":t.Side===null,"text-green-600":t.Side==="B","text-red-600":t.Side==="S"}])},u(t.Side==="B"?"M":t.Side==="S"?"B":"K"),3)])])]))),128))])])])]),_:1})])])):_("",!0)}}};export{ge as default};
