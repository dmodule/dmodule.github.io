import{_ as se}from"./BJHzdlzf.js";import{r as q,a_ as k,b3 as H,bb as oe,bw as n,bs as h,bq as b,br as t,bM as I,bx as y,by as v,bC as i,bN as N,bA as le,bB as ne,bU as w,bZ as F,cm as re}from"./D-GaXO5H.js";import{a as ae,i as ie,f as p}from"./BHKXCVly.js";import{u as ce}from"./CHuXXF4J.js";import{c as ue}from"./-6sX1Uob.js";import"./DxqHYnwt.js";import"./DilLFIVp.js";import"./BLVB0qGI.js";import"./DdDBkiWh.js";import"./BG0isKG0.js";const de={key:0,class:"rounded-finsc overflow-hidden h-full w-full text-base bg-base-300 flex flex-col justify-between"},ge={key:0,class:"flex-none h-[32px]"},pe={class:"w-full relative flex justify-center"},xe={class:"w-[180px] mx-auto relative"},me={class:"text-base-bg-300 absolute inset-0 origin-top-left",width:"360",height:"48",viewBox:"0 0 360 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(0.5)"}},fe={class:"flex text-center gap-4 px-4 py-2"},he={class:"flex justify-between w-full h-7 mx-2"},be={class:"overflow-auto flex-1 px-2 mt-2"},ye={class:"overflow-x-auto w-full max-h-screen rounded-lg bg-white/5"},ve={class:"table text-sm text-center table-pin-rows table-pin-cols"},we={colspan:"3"},Fe={class:"flex relative text-right"},_e={class:"flex-1 text-left px-2"},Se={class:"text-center px-4 py-2"},Be={class:"w-full p-1"},Ce={class:"flex justify-between px-2 font-semibold"},qe={class:"text-green-500"},ke={class:"text-red-600"},Ze={__name:"BoxStrength",props:{symbol:{type:String,default:"symbol"},local:{type:Boolean,default:!1}},setup(j){const L=ce(),O=j,J=(a={},e={})=>{var U,A,E,G;const{basicPrice:u=0,matchPrice:x=0,matchQtty:g=0}=a,s=Math.max(g*10,...((U=e==null?void 0:e.bid)==null?void 0:U.map(o=>o.qtty*10))||[],...((A=e==null?void 0:e.ask)==null?void 0:A.map(o=>o.qtty*10))||[]),l=(o,d)=>{const C=s?d*10/s*100:0,ee=u?((o-u)/u*100).toFixed(1):"0.0",te=o-u;return{changedRatio:ee,percentChange:C.toFixed(1),changed:te.toFixed(2)}},m=((E=e==null?void 0:e.bid)==null?void 0:E.map(o=>({price:o.price,qtty:(o.qtty*10).toLocaleString(),...l(o.price,o.qtty)})))||[],f=((G=e==null?void 0:e.ask)==null?void 0:G.map(o=>({price:o.price,qtty:(o.qtty*10).toLocaleString(),...l(o.price,o.qtty)})))||[],$={price:x,qtty:(g*10).toLocaleString(),...l(x,g)},z=[...m,...f].sort((o,d)=>(d==null?void 0:d.price)-(o==null?void 0:o.price));z.splice(3,0,$);const D=o=>!o||o.length===0?0:o.reduce((d,C)=>d+C.qtty*10,0),S=D(e==null?void 0:e.ask),B=D(e==null?void 0:e.bid),c=S+B,X=c?(S/c*100).toFixed(6):"0.0",Y=c?(B/c*100).toFixed(6):"0.0",R=a.buyForeignQtty||0,Z=a.sellForeignQtty||0,P=c?(R/c*100).toFixed(1):"0.0",T=c?(Z/c*100).toFixed(1):"0.0";return{bids:m,asks:f,matchData:$,list:z,sumBuy:S,sumSell:B,sumBuyPercentage:X,sumSellPercentage:Y,buyForeign:R,sellForeign:Z,buyForeignPercentage:P,sellForeignPercentage:T}},M=q(!1),Q=ae(O.symbol,"FPT"),_=q({}),V=q({}),K=k(()=>L.dataSI),W=k(()=>L.dataTP),r=k(()=>J(_.value,V.value));return H(()=>K.value,a=>{a.symbol===Q.value&&(_.value=a)}),H(()=>W.value,a=>{a.symbol===Q.value&&(V.value=a)}),oe(()=>{ue&&(M.value=!0),setTimeout(()=>{M.value=!0},2e3)}),(a,e)=>{var g;const u=se,x=re;return n(ie)(n(_))?(h(),b("div",de,[j.local?I("",!0):(h(),b("div",ge,[t("div",pe,[t("div",xe,[(h(),b("svg",me,e[0]||(e[0]=[t("path",{d:"M357.237 2.82376e-05C398.658 2.82376e-05 -39.9387 -3.52971e-05 2.95743 2.82376e-05C45.8536 9.17724e-05 66.301 48 115.04 48H251.002C304.338 48 315.815 2.82376e-05 357.237 2.82376e-05Z",fill:"currentColor"},null,-1)]))),e[1]||(e[1]=t("div",{class:"bg-base-primary text-white rounded-full relative text-sm text-center px-2 w-24 mx-auto"}," 3 Bước Giá ",-1))])])])),y(x,{mode:"hover",popper:{placement:"left"}},{panel:v(()=>{var s,l;return[t("div",fe,[t("div",null,[e[2]||(e[2]=t("div",null,"Tổng mua",-1)),t("div",null,i(n(p)((s=n(r))==null?void 0:s.sumBuy)),1)]),t("div",null,[e[3]||(e[3]=t("div",null,"Tổng bán",-1)),t("div",null,i(n(p)((l=n(r))==null?void 0:l.sumSell)),1)])])]}),default:v(()=>{var s,l;return[t("div",he,[t("div",{class:"bg-gradient-to-l from-green-400/80 border-green-400 text-center py-1",style:N({width:((s=n(r))==null?void 0:s.sumBuyPercentage)+"%"})},[y(u,{src:"/static/svg/bull.svg",class:"h-5 mx-auto",alt:"Bull"})],4),t("div",{class:"bg-gradient-to-r from-red-400/80 border-red-400 text-center py-1",style:N({width:((l=n(r))==null?void 0:l.sumSellPercentage)+"%"})},[y(u,{src:"/static/svg/bear.svg",class:"h-5 mx-auto",alt:"Bear"})],4)])]}),_:1}),t("div",be,[t("div",ye,[t("table",ve,[t("tbody",null,[(h(!0),b(le,null,ne((g=n(r))==null?void 0:g.list,(s,l)=>(h(),b("tr",{key:l},[t("td",{class:w({"text-shadow-light":l===3,"text-yellow-500":parseFloat(s.changed)===0,"text-green-500":parseFloat(s.changed)>0,"text-red-600":parseFloat(s.changed)<0})},i(n(p)(s.price)),3),t("td",we,[t("div",Fe,[t("div",{class:w(["absolute bottom-0 left-0 h-full w-full rounded",{"bg-gradient-to-r from-yellow-500/30":parseFloat(s.changed)===0,"bg-gradient-to-r from-green-400/30":parseFloat(s.changed)>0,"bg-gradient-to-r from-red-400/30":parseFloat(s.changed)<0}]),style:N({"max-width":s.percentChange+"%"})},null,6),t("div",_e,i(n(p)(s.qtty)),1),t("div",{class:w(["flex-none w-10 pr-2",{"text-yellow-500":parseFloat(s.changed)===0,"text-green-500":parseFloat(s.changed)>0,"text-red-600":parseFloat(s.changed)<0}])},i(s.changed),3),t("div",{class:w(["flex-none w-10 pr-2 font-semibold",{"text-shadow-light":l===3,"text-yellow-500":parseFloat(s.changed)===0,"text-green-500":parseFloat(s.changed)>0,"text-red-600":parseFloat(s.changed)<0}])},i(s.changedRatio)+"% ",3)])])]))),128))])])])]),y(x,{mode:"hover",popper:{placement:"left"}},{panel:v(()=>{var s,l,m,f;return[t("div",Se,[e[4]||(e[4]=F(" Nước ngoài mua : Nước ngoài bán ")),t("div",null,i(`${n(p)((s=n(r))==null?void 0:s.buyForeign)} (${(l=n(r))==null?void 0:l.buyForeignPercentage}%) : ${n(p)((m=n(r))==null?void 0:m.sellForeign)} (${(f=n(r))==null?void 0:f.sellForeignPercentage}%)`),1),e[5]||(e[5]=t("div",null,"- - - - - -",-1)),e[6]||(e[6]=F(" Phần trăm biểu thị tỷ lệ mua bán của khối ngoại ")),e[7]||(e[7]=t("div",null,"(tính cả thỏa thuận) trên tổng khối lượng khớp.",-1))])]}),default:v(()=>{var s,l;return[t("div",Be,[t("div",Ce,[t("div",null,[e[8]||(e[8]=F(" Mua ")),t("span",qe,i((s=n(r))==null?void 0:s.buyForeignPercentage)+"%",1)]),t("div",null,[t("span",ke,i((l=n(r))==null?void 0:l.sellForeignPercentage)+"%",1),e[9]||(e[9]=F(" Bán "))])])])]}),_:1})])):I("",!0)}}};export{Ze as default};
