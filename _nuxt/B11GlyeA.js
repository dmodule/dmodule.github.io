import{_ as O}from"./nPWjKBdX.js";import{f as G,i as Z,b as K,c as U,_ as W}from"./Dtubw4NZ.js";import{r as _,a_ as d,bT as M,b3 as J,bs as i,bq as c,br as a,bx as b,by as z,bA as y,bB as w,bw as r,bS as B,bC as h,bR as X,bM as ee,bE as te}from"./Nng3t-Yx.js";import{u as se,w as ae}from"./CvsHt8qF.js";import re from"./BkXX1BuV.js";import{g as oe}from"./Bq2qyzQR.js";import{u as ne}from"./B3UB0_2w.js";import{a as le}from"./BdTHawna.js";import"./kWqY28R3.js";import"./DxqHYnwt.js";import"./BLVB0qGI.js";import"./DdDBkiWh.js";const ie={class:"rounded-finsc overflow-hidden flex flex-col h-full w-full bg-base-300 text-sm"},ce={class:"flex flex-none justify-between"},ue={class:"text-sm h-full flex items-center pr-6 -ml-6 -mt-3 overflow-hidden"},de=["onClick"],fe={key:0,class:"px-6 pb-6 flex-1 flex flex-col overflow-auto -mt-6"},me={class:"flex-none -mx-4"},ve={class:"flex-none"},pe={class:"flex justify-between items-center"},_e={class:"flex flex-wrap gap-1 min-w-32"},be={class:"relative"},he={class:"absolute inset-y-0 -left-4 flex items-center"},xe={class:"flex gap-2 text-center"},ye={class:"absolute inset-y-0 -right-4 flex items-center"},we={class:"my-4 font-semibold"},ge={class:"flex-1"},Ce={class:"flex flex-wrap gap-1 min-w-32"},Se={class:"relative"},qe={class:"flex gap-2 text-center"},Qe={__name:"BoxFinance",async setup(Be){let x,$;const k={incomestatement:Z,balancesheet:K,cashflow:U},E={incomestatement:["revenue","grossProfit","postTaxProfit"],balancesheet:["asset","capital","equity"],cashflow:["fromSale","fromInvest","freeCashFlow"]},u=_("incomestatement"),H=t=>{u.value=t},f=_(!0),A=t=>{f.value=t},Q=se(),P=d(()=>Q.symbol),V=(t,e)=>e==="yearOperationProfitGrowth"||e==="yearRevenueGrowth"||e==="yearShareHolderIncomeGrowth"||e==="quarterOperationProfitGrowth"||e==="quarterRevenueGrowth"||e==="quarterShareHolderIncomeGrowth"?(t*100).toFixed(1)+"%":t,Y=d(()=>{var e;const t=((e=C.value)==null?void 0:e.data)||[];return Object.keys(t[0]).filter(s=>s!=="ticker"&&s!=="quarter"&&s!=="year")}),I=d(()=>{var s;const t={};return(((s=C.value)==null?void 0:s.data)||[]).forEach(o=>{const l=o.quarter&&o.quarter<=4?`${o.year} Q${o.quarter}`:o.year;t[l]||(t[l]={}),Y.value.forEach(n=>{t[l][n]=o[n]||null})}),t}),N=d(()=>{const t=new Set(p.value),e={};for(const s of t)I.value[s]&&(e[s]=I.value[s]);return e}),g=d(()=>{var s;const e=(((s=C.value)==null?void 0:s.data)||[]).map(o=>o.quarter&&o.quarter<=4?`${o.year} Q${o.quarter}`:o.year);return[...new Set(e)].sort((o,l)=>l-o)}),m=_(0),v=_(4),p=d(()=>g.value.slice(m.value,v.value).sort((t,e)=>{const[s,o]=String(t).split(" Q").map(Number),[l,n]=String(e).split(" Q").map(Number);return s-l||(o||0)-(n||0)})),j=()=>{m.value>0&&(m.value-=4,v.value-=4)},R=()=>{v.value<g.value.length&&(m.value+=4,v.value+=4)},T={type:"bar",height:"200px",stroke:"smooth",strokeWidth:1,strokeDashes:0,markers:0,dark:!0,fillSolid:!0},F=_([]),D=ne({baseURL:le().API_FINSC}),{data:C,status:L}=([x,$]=ae(()=>M("finance",()=>D.get(`/scfa/${P.value}/${u.value}?yearly=${f.value}`),{watch:[P,u,f]})),x=await x,$(),x);return J(()=>p.value,t=>{F.value=E[u.value].map(e=>({name:k[u.value][e],data:t.map(s=>N.value[s][e])}))}),(t,e)=>{const s=O,o=W,l=te;return i(),c("div",ie,[a("div",ce,[b(s,{scale:.5,pos:"tl"},{default:z(()=>e[2]||(e[2]=[a("div",{class:"mr-10 mb-8 text-2xl rotate-[-32deg] font-semibold text-base-primary",title:"Báo cáo tài chính"},[a("div",{class:"animate-bounce"},"BCTC")],-1)])),_:1}),a("div",ue,[b(o,{class:"max-w-full"},{default:z(()=>[(i(!0),c(y,null,w(r(G),(n,S)=>(i(),c("button",{key:S,onClick:q=>H(n.id),class:B(["rounded-full px-3 py-1 border border-transparent",r(u)===n.id?"bg-base-100":"border-base-neutral"])},h(n.name),11,de))),128))]),_:1})])]),r(L)==="success"?(i(),c("div",fe,[a("div",me,[b(r(re),X({categories:r(p),series:r(F)},T),null,16,["categories","series"])]),a("div",ve,[a("div",pe,[a("div",_e,[a("button",{class:B(["px-3 py-1 rounded-full",{"bg-base-primary":r(f)}]),onClick:e[0]||(e[0]=n=>A(!0))}," Hàng Năm ",2),a("button",{class:B(["px-3 py-1 rounded-full",{"bg-base-primary":!r(f)}]),onClick:e[1]||(e[1]=n=>A(!1))}," Hàng Quý ",2)]),a("div",be,[a("div",he,[b(l,{onClick:R,disabled:r(v)>=r(g).length,icon:"i-ri-arrow-left-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])]),a("div",xe,[(i(!0),c(y,null,w(r(p),n=>(i(),c("div",{key:n,class:"font-semibold w-14"},h(n),1))),128))]),a("div",ye,[b(l,{onClick:j,disabled:r(m)===0,icon:"i-ri-arrow-right-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])])])]),a("div",we,h(r(G)[r(u)]),1)]),a("div",ge,[(i(!0),c(y,null,w(r(Y),(n,S)=>(i(),c("div",{class:"flex justify-between items-center",key:S},[a("div",Ce,h(k[r(u)][n]),1),a("div",Se,[a("div",qe,[(i(!0),c(y,null,w(r(p),q=>(i(),c("div",{class:"w-14 my-1",key:q},h(r(oe)(V(r(N)[q][n],n))),1))),128))])])]))),128))])])):ee("",!0)])}}};export{Qe as default};
