import{_ as K}from"./0fn5s1RB.js";import{r as _,b5 as g,by as W,aG as Z,b4 as u,b2 as h,b3 as n,ba as w,bb as O,bd as T,be as C,bw as D,b9 as r,bf as x,bv as J,bx as M,bh as X}from"./C6hTUVlg.js";import{u as ee,w as te}from"./Cceh2yTk.js";import ne from"./CPOa0h57.js";import{g as se}from"./ZfMn_2dn.js";import{a as $,u as ae}from"./sRrYcR_6.js";import"./bvNvHhZK.js";import"./6bUBh_yt.js";import"./BLVB0qGI.js";import"./B7LlgBWf.js";const G=[{id:"incomestatement",name:"Kết quả kinh doanh"},{id:"balancesheet",name:"Bảng cân đối kế toán"},{id:"cashflow",name:"Bảng dòng tiền"}],oe={revenue:"Doanh thu thuần",yearRevenueGrowth:"TT DT YoY%",quarterRevenueGrowth:"TT DT QoQ%",costOfGoodSold:"Giá vốn hàng bán",grossProfit:"Lợi nhuận gộp",operationExpense:"Chi phí hoạt động",operationProfit:"Lợi nhuận hoạt động",yearOperationProfitGrowth:"TT LNHĐ	YoY%",quarterOperationProfitGrowth:"TT LNHĐ QoQ%",interestExpense:"Chi phí lãi vay",preTaxProfit:"Lợi nhuận trước thuế",postTaxProfit:"Lợi nhuận sau thuế",shareHolderIncome:"Lợi nhuận dành cho cổ đông",yearShareHolderIncomeGrowth:"TT LNCĐ YoY%",quarterShareHolderIncomeGrowth:"TT LNCĐ QoQ%",investProfit:"Lợi nhuận từ đầu tư",serviceProfit:"Lợi nhuận từ dịch vụ",otherProfit:"Lợi nhuận khác",provisionExpense:"Chi phí dự phòng",operationIncome:"Thu nhập từ hoạt động kinh doanh",ebitda:"EBITDA"},re={shortAsset:"Tài sản ngắn hạn",cash:"Tiền và các khoản tương đương tiền",shortInvest:"Đầu tư ngắn hạn",shortReceivable:"Phải thu ngắn hạn",inventory:"Hàng tồn kho",longAsset:"Tài sản dài hạn",fixedAsset:"Tài sản cố định",asset:"Tổng tài sản",debt:"Nợ phải trả",shortDebt:"Nợ ngắn hạn",longDebt:"Nợ dài hạn",equity:"Vốn chủ sở hữu",capital:"Vốn điều lệ",centralBankDeposit:"Tiền gửi tại Ngân hàng Trung ương",otherBankDeposit:"Tiền gửi tại Ngân hàng khác",otherBankLoan:"Vay từ Ngân hàng khác",stockInvest:"Đầu tư chứng khoán",customerLoan:"Cho vay khách hàng",badLoan:"Nợ xấu",provision:"Dự phòng rủi ro tín dụng",netCustomerLoan:"Cho vay khách hàng ròng",otherAsset:"Tài sản khác",otherBankCredit:"Tín dụng từ Ngân hàng khác",oweOtherBank:"Nợ Ngân hàng khác",oweCentralBank:"Nợ Ngân hàng Trung ương",valuablePaper:"Giấy tờ có giá",payableInterest:"Lãi phải trả",receivableInterest:"Lãi phải thu",deposit:"Tiền gửi",otherDebt:"Nợ khác",fund:"Quỹ",unDistributedIncome:"Lợi nhuận chưa phân phối",minorShareHolderProfit:"Lợi nhuận của cổ đông thiểu số",payable:"Phải trả"},ie={investCost:"Chi phí đầu tư",fromInvest:"Dòng tiền từ hoạt động đầu tư",fromFinancial:"Dòng tiền từ hoạt động tài chính",fromSale:"Dòng tiền từ hoạt động kinh doanh",freeCashFlow:"Dòng tiền tự do"},Q=(e,i={})=>{const l={baseURL:$().API_URL,headers:{Authorization:null},method:e.toUpperCase(),timeout:1e4,...i},d=ae().token;return d&&(l.headers.Authorization=d),l};function le(e){return e!=null&&e.data&&typeof e.data=="string"&&e.data.length>0&&console.log(e.data),Promise.reject(e)}async function k(e,i,l,d={}){try{return await $fetch(i,e==="GET"||e==="DELETE"?{...Q(e,d),params:l}:{...Q(e,d),body:l})}catch(L){return le(L)}}function ce(e={}){return{get:(i,l={})=>k("GET",i,l,e),post:(i,l={})=>k("POST",i,l,e),put:(i,l={})=>k("PUT",i,l,e),patch:(i,l={})=>k("PATCH",i,l,e),delete:(i,l={})=>k("DELETE",i,l,e)}}const ue={class:"rounded-finsc overflow-hidden flex flex-col h-full w-full text-base bg-base-300"},he={class:"flex flex-none justify-between"},de={class:"text-sm h-full flex items-center pr-6 -ml-6 -mt-3 overflow-hidden"},fe={class:"flex gap-2 justify-around whitespace-nowrap overflow-auto"},pe=["onClick"],ge={key:0,class:"px-6 pb-6 flex-1 flex flex-col overflow-auto -mt-6"},ve={class:"flex-none -mx-4"},me={class:"flex-none"},be={class:"flex justify-between items-center"},ye={class:"flex flex-wrap gap-1 min-w-32"},_e={class:"relative"},xe={class:"absolute inset-y-0 -left-4 flex items-center"},ke={class:"flex gap-2 text-center"},we={class:"absolute inset-y-0 -right-4 flex items-center"},Te={class:"my-4 font-semibold"},Ce={class:"flex-1"},Le={class:"flex flex-wrap gap-1 min-w-32"},Pe={class:"relative"},Ne={class:"flex gap-2 text-center"},$e={__name:"BoxFinance",async setup(e){let i,l;const d={incomestatement:oe,balancesheet:re,cashflow:ie},L={incomestatement:["revenue","grossProfit","postTaxProfit"],balancesheet:["asset","capital","equity"],cashflow:["fromSale","fromInvest","freeCashFlow"]},f=_("incomestatement"),H=c=>{f.value=c},v=_(!0),S=c=>{v.value=c},V=ee(),q=g(()=>V.symbol),A=g(()=>{var t;const c=((t=N.value)==null?void 0:t.data)||[];return Object.keys(c[0]).filter(s=>s!=="ticker"&&s!=="quarter"&&s!=="year")}),E=g(()=>{var s;const c={};return(((s=N.value)==null?void 0:s.data)||[]).forEach(a=>{const o=a.quarter&&a.quarter<=4?`${a.year} Q${a.quarter}`:a.year;c[o]||(c[o]={}),A.value.forEach(p=>{c[o][p]=a[p]||null})}),c}),I=g(()=>{const c=new Set(y.value),t={};for(const s of c)E.value[s]&&(t[s]=E.value[s]);return t}),P=g(()=>{var s;const t=(((s=N.value)==null?void 0:s.data)||[]).map(a=>a.quarter&&a.quarter<=4?`${a.year} Q${a.quarter}`:a.year);return[...new Set(t)].sort((a,o)=>o-a)}),m=_(0),b=_(4),y=g(()=>P.value.slice(m.value,b.value).sort((c,t)=>{const[s,a]=String(c).split(" Q").map(Number),[o,p]=String(t).split(" Q").map(Number);return s-o||(a||0)-(p||0)})),F=()=>{m.value>0&&(m.value-=4,b.value-=4)},j=()=>{b.value<P.value.length&&(m.value+=4,b.value+=4)},z={type:"bar",height:"200px",stroke:"smooth",strokeWidth:1,strokeDashes:0,markers:0,dark:!0,fillSolid:!0},Y=_([]),R=ce({baseURL:$().API_FINSC}),{data:N,status:U}=([i,l]=te(()=>W("finance",()=>R.get(`/scfa/${q.value}/${f.value}?yearly=${v.value}`),{watch:[q,f,v]})),i=await i,l(),i);return Z(()=>y.value,c=>{Y.value=L[f.value].map(t=>({name:d[f.value][t],data:c.map(s=>I.value[s][t])}))}),(c,t)=>{const s=K,a=X;return u(),h("div",ue,[n("div",he,[w(s,{scale:.5,pos:"tl"},{default:O(()=>t[2]||(t[2]=[n("div",{class:"mr-10 mb-8 text-2xl rotate-[-32deg] font-semibold text-base-primary",title:"Báo cáo tài chính"},[n("div",{class:"animate-bounce"},"BCTC")],-1)])),_:1}),n("div",de,[n("div",fe,[(u(!0),h(T,null,C(r(G),(o,p)=>(u(),h("button",{key:p,onClick:B=>H(o.id),class:D(["rounded-full px-3 py-1 border border-transparent",r(f)===o.id?"bg-base-100":"border-base-neutral"])},x(o.name),11,pe))),128))])])]),r(U)==="success"?(u(),h("div",ge,[n("div",ve,[w(r(ne),J({categories:r(y),series:r(Y)},z),null,16,["categories","series"])]),n("div",me,[n("div",be,[n("div",ye,[n("button",{class:D(["px-3 py-1 rounded-full",{"bg-base-primary":r(v)}]),onClick:t[0]||(t[0]=o=>S(!0))}," Hàng Năm ",2),n("button",{class:D(["px-3 py-1 rounded-full",{"bg-base-primary":!r(v)}]),onClick:t[1]||(t[1]=o=>S(!1))}," Hàng Quý ",2)]),n("div",_e,[n("div",xe,[w(a,{onClick:j,disabled:r(b)>=r(P).length,icon:"i-ri-arrow-left-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])]),n("div",ke,[(u(!0),h(T,null,C(r(y),o=>(u(),h("div",{key:o,class:"font-semibold w-14"},x(o),1))),128))]),n("div",we,[w(a,{onClick:F,disabled:r(m)===0,icon:"i-ri-arrow-right-s-line",size:"2xs",color:"gray",square:"",ui:{rounded:"rounded-full"}},null,8,["disabled"])])])]),n("div",Te,x(r(G)[r(f)]),1)]),n("div",Ce,[(u(!0),h(T,null,C(r(A),(o,p)=>(u(),h("div",{class:"flex justify-between items-center",key:p},[n("div",Le,x(d[r(f)][o]),1),n("div",Pe,[n("div",Ne,[(u(!0),h(T,null,C(r(y),B=>(u(),h("div",{class:"w-14 my-1",key:B},x(r(se)(r(I)[B][o])||"-"),1))),128))])])]))),128))])])):M("",!0)])}}};export{$e as default};
